ifdef::env-github[]
:tip-caption: :bulb:
:note-caption: :information_source:
:important-caption: :heavy_exclamation_mark:
:caution-caption: :fire:
:warning-caption: :warning:
endif::[]

:imagesdir: ./images/
= TI Messenger Documentation

image::gematik_logo.svg[gematik,width="70%"]

image:https://img.shields.io/badge/Release%20Notes-v0.1-red?style=plastic&logo=github&logoColor=red[link="ReleaseNotes.md"] +
image:https://img.shields.io/badge/ContactManagement-v1.0.0-blue?style=plastic&logo=github&logoColor=blue[link=/src/openapi/TiMessengerContactManagement.yaml"]
image:https://img.shields.io/badge/TestTreiber-v0.2.0-blue?style=plastic&logo=github&logoColor=blue[link="/src/openapi/TiMessengerTestTreiber.yaml"] +
image:https://img.shields.io/badge/TI&hyphen;Messenger&hyphen;Dienst-v1.1.0-green?style=plastic&logo=github&logoColor=green[link="https://fachportal.gematik.de/fachportal-import/files/gemSpec_TI-Messenger-Dienst_V1.1.0.pdf"]
image:https://img.shields.io/badge/TI&hyphen;Messenger&hyphen;FD-v1.1.0-green?style=plastic&logo=github&logoColor=green[link="https://fachportal.gematik.de/fachportal-import/files/gemSpec_TI-Messenger-FD_V1.1.0.pdf"]
image:https://img.shields.io/badge/TI&hyphen;Messenger&hyphen;Client-v1.1.0-green?style=plastic&logo=github&logoColor=green[link="https://fachportal.gematik.de/fachportal-import/files/gemSpec_TI-Messenger-Client_V1.1.0.pdf"]

â­ï¸ If gematik change something in this repository you can to be notified. Please star!

== General
---

âš ï¸ ***Planned change requests for:* link:docs/changes/TI-Messenger_v1.1_changes.adoc[TI-Messenger-Dienst v1.1].**

---

The following documentation is based on the TI-Messenger-Dienst v1.1 specification according to *[gemSpec_TI-Messenger-Dienst]*. At this point, the components of the solution mentioned in the specification and their interfaces are presented and explained in order to provide manufacturers and providers with the best possible support. The range of functions of the TI Messenger-Dienst v1.1 includes: +

* the real-time communication between Healthcare Provider and Healthcare Provider Institution and
* real-time communication directly between Healthcare Providers.

ğŸ’¡ _With TI-Messenger-Dienst v1.1 no insured persons can participate in the TI-Messenger service_

== System Overview
The following picture gives an overview of the system architecture of the TI-Messenger-Dienst v1.1. The IDP services that are also necessary for the operation of the TI-Messenger-Dienst are not considered here.

++++
<p align="left">
  <img width="100%" src=./images/System_overview.png>
</p>
++++

link:docs/TI-Messenger-Fachdienst.adoc[*TI Messenger-Fachdienst*]

* *Registrierungs-Dienst:* +
The Registrierungs-Dienst offers two abstract interfaces. The interface `I_Registration` is called by the frontend of the Registrierungs-Dienst to authenticate an organization to the Registrierungs-Dienst and to administrate Messenger-Services. The interface `I_internVerfification` is called by the Messenger-Proxies to retrieve the federation list and to check for existing VZD-FHIR entries of the actors involved in an intended communication.

* *Messenger-Service:* +
A Messenger-Service consists of the subcomponents Messenger-Proxy and a Matrix-Homeserver. The subcomponent Matrix-Homeserver is based on the open communication protocol Matrix and offers the `Matrix-Client-Server API` and the `Matrix-Server-Server API`. Communication with a Matrix-Homeserver is always routed via the Messenger-Proxy, provided the authorization check was successful. This provides the interface `I_TiMessengerContactManagement` to enable the administration of an actor's release list.

* *Push-Gateway:* +
The Push-Gateway provides the `Matrix-Push Gateway API` according to the Matrix specification. This enables notifications to be forwarded to actors in the TI Messenger-Dienst.

link:docs/TI-Messenger-Client.adoc[*TI Messenger-Client*] +

* The TI-Messenger-Client is based on the `Matrix-Client-Server API`. It is expanded by further functional features and calls up the interfaces on the TI-Messenger-Fachdienst and on the VZD-FHIR--Directory.

link:docs/FHIR-Directory.adoc[*VZD-FHIR-Directory*] +

* The VZD-FHIR-Directory is a central TI-directory service that enables organizations and actors in the TI-Messenger-Dienst to be searched throughout Germany. The VZD-FHIR-Directory is based on the FHIR standard and offers relevant interfaces for the TI-Messenger-Dienst. The `I_VZD_TiMessenger_services` interface is called by the Registrierungs-Dienst to download a federation list. The interfaces `tim-authenticate` and `owner-authenticate` are called by the TI-Messenger-Clients to enable a search or to make an entry in the VZD-FHIR-Directory.

== Folder structure
The organization of the folder structure is shown below.

----
TI-Messenger Dokumentation
â”œâ”€ github
â”‚   â””â”€â”€â”€â”€ workflows
â”œâ”€ docs
|   â”œâ”€â”€â”€â”€ changes
|   â””â”€â”€â”€â”€ use-cases
â”œâ”€ images
â”œâ”€ src
â”‚   â”œâ”€â”€â”€â”€ fhir
â”‚   â”‚    â”œâ”€â”€ fsh-generated
â”‚   â”‚    â”œâ”€â”€ input
â”‚   â”‚    â”œâ”€â”€ output
â”‚   â”‚    â”œâ”€â”€ temp
â”‚   â”‚    â””â”€â”€ template
â”‚   â”œâ”€â”€â”€â”€ openapi
â”‚   â”‚    â”œâ”€â”€ TiMessengerContactManagement.yaml
â”‚   â”‚    â””â”€â”€ TiMessengerTestTreiber.yaml 
â”‚   â”œâ”€â”€â”€â”€ plantuml
â”‚   â”‚    â”œâ”€â”€ TI-Messenger-Dienst
â”‚   â”‚    â”œâ”€â”€ architecture
â”‚   â”‚    â””â”€â”€ includes 
â”‚   â””â”€â”€â”€â”€ schema
â”‚        â””â”€â”€ Attachment_schema.json
â”œâ”€â”€ README.adoc
â””â”€â”€ ReleaseNotes.md
----

== Referenced documents
The table below contains the gematik documents on the telematics infrastructure referenced in this online documentation. The version number valid for this document can be found in the current document map published on the gematik website, in which the present version is listed.

|===
|[Source] |Editor: Title

|*[gemSpec_TI-Messenger-Dienst]* |gematik: Spezifikation TI-Messenger-Dienst
|*[gemSpec_TI-Messenger-FD]* |gematik: Spezifikation TI-Messenger-Fachdienst
|*[gemSpec_TI-Messenger-Client]* |gematik: Spezifikation TI-Messenger-Client
|*[gemSpec_VZD_FHIR_Directory]* |gematik: Spezifikation Verzeichnisdienst FHIR-Directory
|===

== Additional pages
*Use cases* +
link:docs/TI-Messenger-Use-Cases.adoc[- Use Cases and sequence diagrams]

*Product types* +
link:docs/TI-Messenger-Fachdienst.adoc[- TI-Messenger-Fachdienst] +
link:docs/TI-Messenger-Client.adoc[- TI-Messenger-Client] +
link:docs/FHIR-Directory.adoc[- VZD-FHIR-Directory]

*Miscellaneous* +
https://gematikde.sharepoint.com/sites/EXTAuthenticator/Freigegebene%20Dokumente/Forms/AllItems.aspx?id=%2Fsites%2FEXTAuthenticator%2FFreigegebene%20Dokumente%2FVer%C3%B6ffentlichte%20Version%20%2D%20gematik%20Authenticator&p=true&ga=1[- gematik Authenticator] +
link:docs/Q&A.adoc[- Questions and answers &#91;Q&A&#93;]

*Reference implementations* +
- [comming soon]

*Testsuite* +
link:https://github.com/gematik/TI-Messenger-Testsuite[- Testsuite] +
link:https://github.com/gematik/app-Tiger[- Tiger-Testframework] +
link:https://github.com/gematik/cucumber-test-combinations-maven-plugin[- Cucumber-Cmbinations-Plugin]

== License
Copyright (c) 2022 gematik GmbH

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
