<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1913px" preserveAspectRatio="none" style="width:1531px;height:1913px;background:#FFFFFF;" version="1.1" viewBox="0 0 1531 1913" width="1531px" zoomAndPan="magnify"><defs><filter height="300%" id="fko7pt3bygsx3" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#F5F5F5" height="1901.9844" style="stroke:#A80036;stroke-width:1.0;" width="443" x="288" y="6"/><text fill="#000000" font-family="sans-serif" font-size="19" font-weight="bold" lengthAdjust="spacing" textLength="99" x="457.5" y="23.6362">Endgerät</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="0" x="561.5" y="25.0513"/><rect fill="#DCDCDC" filter="url(#fko7pt3bygsx3)" height="1120.375" style="stroke:#000000;stroke-width:1.0;" width="10" x="415.5" y="232.1094"/><rect fill="#DCDCDC" filter="url(#fko7pt3bygsx3)" height="259.5234" style="stroke:#000000;stroke-width:1.0;" width="10" x="415.5" y="1456.8984"/><rect fill="#DCDCDC" filter="url(#fko7pt3bygsx3)" height="345.1172" style="stroke:#000000;stroke-width:1.0;" width="10" x="638" y="385.9375"/><rect fill="#DCDCDC" filter="url(#fko7pt3bygsx3)" height="101.3672" style="stroke:#000000;stroke-width:1.0;" width="10" x="817" y="453.5156"/><rect fill="#DCDCDC" filter="url(#fko7pt3bygsx3)" height="14" style="stroke:#000000;stroke-width:1.0;" width="10" x="995" y="487.3047"/><rect fill="#DCDCDC" filter="url(#fko7pt3bygsx3)" height="47.5195" style="stroke:#000000;stroke-width:1.0;" width="10" x="1206.5" y="279.6289"/><rect fill="#DCDCDC" filter="url(#fko7pt3bygsx3)" height="495.0625" style="stroke:#000000;stroke-width:1.0;" width="10" x="1206.5" y="823.6328"/><rect fill="#DCDCDC" filter="url(#fko7pt3bygsx3)" height="191.9453" style="stroke:#000000;stroke-width:1.0;" width="10" x="1206.5" y="1490.6875"/><rect fill="#DCDCDC" filter="url(#fko7pt3bygsx3)" height="378.9063" style="stroke:#000000;stroke-width:1.0;" width="10" x="1418" y="385.9375"/><rect fill="#DCDCDC" filter="url(#fko7pt3bygsx3)" height="33.7891" style="stroke:#000000;stroke-width:1.0;" width="10" x="1418" y="877.2109"/><rect fill="#F0F8FF" filter="url(#fko7pt3bygsx3)" height="1588.8594" style="stroke:#000000;stroke-width:2.0;" width="1507" x="10" y="160.5625"/><rect fill="#FFE4E1" filter="url(#fko7pt3bygsx3)" height="78.3828" style="stroke:#000000;stroke-width:2.0;" width="717" x="20" y="594.8828"/><rect fill="#FFE4E1" filter="url(#fko7pt3bygsx3)" height="112.1719" style="stroke:#000000;stroke-width:2.0;" width="1319" x="20" y="1082.1563"/><rect fill="#F0F8FF" height="363.9375" style="stroke:none;stroke-width:1.0;" width="1507" x="10" y="1385.4844"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="126" x2="126" y1="118.5625" y2="1791.4219"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="420" x2="420" y1="118.5625" y2="1791.4219"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="643" x2="643" y1="118.5625" y2="1791.4219"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="822" x2="822" y1="118.5625" y2="1791.4219"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1000" x2="1000" y1="118.5625" y2="1791.4219"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1211" x2="1211" y1="118.5625" y2="1791.4219"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1423" x2="1423" y1="118.5625" y2="1791.4219"/><text fill="#000000" font-family="Aapex" font-size="20" lengthAdjust="spacing" textLength="187" x="30" y="90.5645">Akteur in der Rolle</text><text fill="#000000" font-family="Aapex" font-size="20" lengthAdjust="spacing" textLength="110" x="68.5" y="113.8457">Org-Admin</text><ellipse cx="126.5" cy="15" fill="#DCDCDC" filter="url(#fko7pt3bygsx3)" rx="8" ry="8" style="stroke:#000000;stroke-width:2.0;"/><path d="M126.5,23 L126.5,50 M113.5,31 L139.5,31 M126.5,50 L113.5,65 M126.5,50 L139.5,65 " fill="none" filter="url(#fko7pt3bygsx3)" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="Aapex" font-size="20" lengthAdjust="spacing" textLength="187" x="30" y="1808.9863">Akteur in der Rolle</text><text fill="#000000" font-family="Aapex" font-size="20" lengthAdjust="spacing" textLength="110" x="68.5" y="1832.2676">Org-Admin</text><ellipse cx="126.5" cy="1846.9844" fill="#DCDCDC" filter="url(#fko7pt3bygsx3)" rx="8" ry="8" style="stroke:#000000;stroke-width:2.0;"/><path d="M126.5,1854.9844 L126.5,1881.9844 M113.5,1862.9844 L139.5,1862.9844 M126.5,1881.9844 L113.5,1896.9844 M126.5,1881.9844 L139.5,1896.9844 " fill="none" filter="url(#fko7pt3bygsx3)" style="stroke:#000000;stroke-width:2.0;"/><rect fill="#EFEFFF" filter="url(#fko7pt3bygsx3)" height="60.5625" style="stroke:#000000;stroke-width:1.5;" width="253" x="292" y="53"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="132" x="349.5" y="78.5645">Frontend des</text><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="239" x="299" y="101.8457">Registrierungs-Dienstes</text><rect fill="#EFEFFF" filter="url(#fko7pt3bygsx3)" height="60.5625" style="stroke:#000000;stroke-width:1.5;" width="253" x="292" y="1790.4219"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="132" x="349.5" y="1815.9863">Frontend des</text><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="239" x="299" y="1839.2676">Registrierungs-Dienstes</text><rect fill="#EFEFFF" filter="url(#fko7pt3bygsx3)" height="37.2813" style="stroke:#000000;stroke-width:1.5;" width="164" x="559" y="76.2813"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="138" x="572" y="101.8457">Authenticator</text><rect fill="#EFEFFF" filter="url(#fko7pt3bygsx3)" height="37.2813" style="stroke:#000000;stroke-width:1.5;" width="164" x="559" y="1790.4219"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="138" x="572" y="1815.9863">Authenticator</text><rect fill="#EFEFFF" filter="url(#fko7pt3bygsx3)" height="37.2813" style="stroke:#000000;stroke-width:1.5;" width="164" x="738" y="76.2813"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="103" x="768.5" y="101.8457">Konnektor</text><rect fill="#EFEFFF" filter="url(#fko7pt3bygsx3)" height="37.2813" style="stroke:#000000;stroke-width:1.5;" width="164" x="738" y="1790.4219"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="103" x="768.5" y="1815.9863">Konnektor</text><rect fill="#EFEFFF" filter="url(#fko7pt3bygsx3)" height="37.2813" style="stroke:#000000;stroke-width:1.5;" width="164" x="916" y="76.2813"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="109" x="943.5" y="101.8457">eHealth KT</text><rect fill="#EFEFFF" filter="url(#fko7pt3bygsx3)" height="37.2813" style="stroke:#000000;stroke-width:1.5;" width="164" x="916" y="1790.4219"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="109" x="943.5" y="1815.9863">eHealth KT</text><rect fill="#EFEFFF" filter="url(#fko7pt3bygsx3)" height="37.2813" style="stroke:#000000;stroke-width:1.5;" width="231" x="1094" y="76.2813"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="217" x="1101" y="101.8457">Registrierungs-Dienst</text><rect fill="#EFEFFF" filter="url(#fko7pt3bygsx3)" height="37.2813" style="stroke:#000000;stroke-width:1.5;" width="231" x="1094" y="1790.4219"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="217" x="1101" y="1815.9863">Registrierungs-Dienst</text><rect fill="#EFEFFF" filter="url(#fko7pt3bygsx3)" height="60.5625" style="stroke:#000000;stroke-width:1.5;" width="164" x="1339" y="53"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="90" x="1373" y="78.5645">zentraler</text><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="104" x="1369" y="101.8457">IDP-Dienst</text><rect fill="#EFEFFF" filter="url(#fko7pt3bygsx3)" height="60.5625" style="stroke:#000000;stroke-width:1.5;" width="164" x="1339" y="1790.4219"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="90" x="1373" y="1815.9863">zentraler</text><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="104" x="1369" y="1839.2676">IDP-Dienst</text><rect fill="#DCDCDC" filter="url(#fko7pt3bygsx3)" height="1120.375" style="stroke:#000000;stroke-width:1.0;" width="10" x="415.5" y="232.1094"/><rect fill="#DCDCDC" filter="url(#fko7pt3bygsx3)" height="259.5234" style="stroke:#000000;stroke-width:1.0;" width="10" x="415.5" y="1456.8984"/><rect fill="#DCDCDC" filter="url(#fko7pt3bygsx3)" height="345.1172" style="stroke:#000000;stroke-width:1.0;" width="10" x="638" y="385.9375"/><rect fill="#DCDCDC" filter="url(#fko7pt3bygsx3)" height="101.3672" style="stroke:#000000;stroke-width:1.0;" width="10" x="817" y="453.5156"/><rect fill="#DCDCDC" filter="url(#fko7pt3bygsx3)" height="14" style="stroke:#000000;stroke-width:1.0;" width="10" x="995" y="487.3047"/><rect fill="#DCDCDC" filter="url(#fko7pt3bygsx3)" height="47.5195" style="stroke:#000000;stroke-width:1.0;" width="10" x="1206.5" y="279.6289"/><rect fill="#DCDCDC" filter="url(#fko7pt3bygsx3)" height="495.0625" style="stroke:#000000;stroke-width:1.0;" width="10" x="1206.5" y="823.6328"/><rect fill="#DCDCDC" filter="url(#fko7pt3bygsx3)" height="191.9453" style="stroke:#000000;stroke-width:1.0;" width="10" x="1206.5" y="1490.6875"/><rect fill="#DCDCDC" filter="url(#fko7pt3bygsx3)" height="378.9063" style="stroke:#000000;stroke-width:1.0;" width="10" x="1418" y="385.9375"/><rect fill="#DCDCDC" filter="url(#fko7pt3bygsx3)" height="33.7891" style="stroke:#000000;stroke-width:1.0;" width="10" x="1418" y="877.2109"/><path d="M10,160.5625 L74,160.5625 L74,167.5625 L64,177.5625 L10,177.5625 L10,160.5625 " fill="#D3D3D3" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="1588.8594" style="stroke:#000000;stroke-width:2.0;" width="1507" x="10" y="160.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="25" y="173.6294">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="5" x="89" y="178.5933">[</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="515" x="94" y="177.4141">Organisation nicht am Registrierungs-Dienst authentisiert</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="5" x="609" y="178.5933">]</text><polygon fill="#000000" points="403.5,228.1094,413.5,232.1094,403.5,236.1094,407.5,232.1094" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="126.5" x2="409.5" y1="232.1094" y2="232.1094"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="206" x="133.5" y="226.1001">Organisation verifizieren</text><polygon fill="#000000" points="1194.5,275.6289,1204.5,279.6289,1194.5,283.6289,1198.5,279.6289" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="425.5" x2="1200.5" y1="279.6289" y2="279.6289"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="119" x="432.5" y="273.6196">POST /register</text><path d="M1221,245.1094 L1221,292.1094 L1469,292.1094 L1469,255.1094 L1459,245.1094 L1221,245.1094 " fill="#FBFB77" filter="url(#fko7pt3bygsx3)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1459,245.1094 L1459,255.1094 L1469,255.1094 L1459,245.1094 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="174" x="1227" y="264.9609">Schnittstelle wird nicht</text><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="227" x="1227" y="283.5859">durch die gematik spezifiziert</text><polygon fill="#000000" points="436.5,323.1484,426.5,327.1484,436.5,331.1484,432.5,327.1484" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="430.5" x2="1210.5" y1="327.1484" y2="327.1484"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="323" x="881.5" y="321.1392">Redirect to IDP Authorization Endpoint</text><polygon fill="#000000" points="1406,381.9375,1416,385.9375,1406,389.9375,1410,385.9375" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="425.5" x2="1412" y1="385.9375" y2="385.9375"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="124" x="432.5" y="379.9282">GET /authorize</text><polygon fill="#000000" points="659,415.7266,649,419.7266,659,423.7266,655,419.7266" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="653" x2="1417" y1="419.7266" y2="419.7266"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="209" x="1202" y="413.7173">Authentication challenge</text><polygon fill="#000000" points="805,449.5156,815,453.5156,805,457.5156,809,453.5156" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="648" x2="811" y1="453.5156" y2="453.5156"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="124" x="655" y="447.5063">SignDocument</text><polygon fill="#000000" points="983,483.3047,993,487.3047,983,491.3047,987,487.3047" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="827" x2="989" y1="487.3047" y2="487.3047"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="139" x="834" y="481.2954">SICCT command</text><polygon fill="#000000" points="838,497.3047,828,501.3047,838,505.3047,834,501.3047" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="832" x2="999" y1="501.3047" y2="501.3047"/><polygon fill="#000000" points="659,550.8828,649,554.8828,659,558.8828,655,554.8828" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="653" x2="821" y1="554.8828" y2="554.8828"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="79" x="731" y="529.0845">Response</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="141" x="674" y="548.8735">signedDocument</text><path d="M20,594.8828 L90,594.8828 L90,601.8828 L80,611.8828 L20,611.8828 L20,594.8828 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="78.3828" style="stroke:#000000;stroke-width:2.0;" width="717" x="20" y="594.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="25" x="35" y="607.9497">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="5" x="105" y="611.7495">[</text><text fill="#000000" font-family="sans-serif" font-size="15" font-weight="bold" lengthAdjust="spacing" textLength="67" x="110" y="610.8062">Abbruch</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="5" x="177" y="611.7495">]</text><polygon fill="#000000" points="137.5,636.2656,127.5,640.2656,137.5,644.2656,133.5,640.2656" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="131.5" x2="637" y1="640.2656" y2="640.2656"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="222" x="409" y="634.2563">SMC-B nicht freigeschaltet</text><polygon fill="#000000" points="1406,727.0547,1416,731.0547,1406,735.0547,1410,731.0547" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="643" x2="1412" y1="731.0547" y2="731.0547"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="203" x="650" y="725.0454">Authentication response</text><polygon fill="#000000" points="436.5,760.8438,426.5,764.8438,436.5,768.8438,432.5,764.8438" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="430.5" x2="1422" y1="764.8438" y2="764.8438"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="156" x="1260" y="758.8345">Authorization code</text><polygon fill="#000000" points="1194.5,819.6328,1204.5,823.6328,1194.5,827.6328,1198.5,823.6328" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="425.5" x2="1200.5" y1="823.6328" y2="823.6328"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="294" x="432.5" y="817.6235">POST /register (Authorization code)</text><polygon fill="#000000" points="1406,873.2109,1416,877.2109,1406,881.2109,1410,877.2109" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="1216.5" x2="1412" y1="877.2109" y2="877.2109"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="178" x="1223.5" y="851.4126">POST /tokenEndpoint</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="177" x="1223.5" y="871.2017">{authorization code}</text><polygon fill="#000000" points="1227.5,907,1217.5,911,1227.5,915,1223.5,911" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1221.5" x2="1422" y1="911" y2="911"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="72" x="1344" y="904.9907">id_token</text><line style="stroke:#000000;stroke-width:1.0;" x1="1216.5" x2="1258.5" y1="1029.1563" y2="1029.1563"/><line style="stroke:#000000;stroke-width:1.0;" x1="1258.5" x2="1258.5" y1="1029.1563" y2="1042.1563"/><line style="stroke:#000000;stroke-width:1.0;" x1="1217.5" x2="1258.5" y1="1042.1563" y2="1042.1563"/><polygon fill="#000000" points="1227.5,1038.1563,1217.5,1042.1563,1227.5,1046.1563,1223.5,1042.1563" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="92" x="1223.5" y="963.7798">enthaltene</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="149" x="1223.5" y="983.5688">ProfessionOID auf</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="170" x="1223.5" y="1003.3579">gültige Organisation</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="55" x="1223.5" y="1023.147">prüfen</text><path d="M20,1082.1563 L90,1082.1563 L90,1089.1563 L80,1099.1563 L20,1099.1563 L20,1082.1563 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="112.1719" style="stroke:#000000;stroke-width:2.0;" width="1319" x="20" y="1082.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="25" x="35" y="1095.2231">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="5" x="105" y="1099.0229">[</text><text fill="#000000" font-family="sans-serif" font-size="15" font-weight="bold" lengthAdjust="spacing" textLength="67" x="110" y="1098.0796">Abbruch</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="5" x="177" y="1099.0229">]</text><polygon fill="#000000" points="436.5,1123.5391,426.5,1127.5391,436.5,1131.5391,432.5,1127.5391" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="430.5" x2="1205.5" y1="1127.5391" y2="1127.5391"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="315" x="884.5" y="1121.5298">keine gültige ProfessionOID gefunden</text><polygon fill="#000000" points="137.5,1157.3281,127.5,1161.3281,137.5,1165.3281,133.5,1161.3281" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="131.5" x2="414.5" y1="1161.3281" y2="1161.3281"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="265" x="143.5" y="1155.3188">Authentisierung fehlgeschlagen</text><line style="stroke:#000000;stroke-width:1.0;" x1="1216.5" x2="1258.5" y1="1271.9063" y2="1271.9063"/><line style="stroke:#000000;stroke-width:1.0;" x1="1258.5" x2="1258.5" y1="1271.9063" y2="1284.9063"/><line style="stroke:#000000;stroke-width:1.0;" x1="1217.5" x2="1258.5" y1="1284.9063" y2="1284.9063"/><polygon fill="#000000" points="1227.5,1280.9063,1217.5,1284.9063,1227.5,1288.9063,1223.5,1284.9063" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="107" x="1223.5" y="1246.1079">Organisation</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="134" x="1223.5" y="1265.897">authentifizieren</text><polygon fill="#000000" points="436.5,1314.6953,426.5,1318.6953,436.5,1322.6953,432.5,1318.6953" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="430.5" x2="1210.5" y1="1318.6953" y2="1318.6953"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="133" x="1071.5" y="1312.686">status, id_token</text><polygon fill="#000000" points="137.5,1348.4844,127.5,1352.4844,137.5,1356.4844,133.5,1352.4844" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="131.5" x2="419.5" y1="1352.4844" y2="1352.4844"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="200" x="213.5" y="1346.4751">Verifizierung erfolgreich</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="10" x2="1517" y1="1386.4844" y2="1386.4844"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="5" x="15" y="1402.5151">[</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="465" x="20" y="1401.3359">Organisation am Registrierungs-Dienst authentisiert</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="5" x="485" y="1402.5151">]</text><polygon fill="#000000" points="403.5,1452.8984,413.5,1456.8984,403.5,1460.8984,407.5,1456.8984" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="126.5" x2="409.5" y1="1456.8984" y2="1456.8984"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="197" x="133.5" y="1450.8892">Admin Account anlegen</text><polygon fill="#000000" points="1194.5,1486.6875,1204.5,1490.6875,1194.5,1494.6875,1198.5,1490.6875" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="425.5" x2="1200.5" y1="1490.6875" y2="1490.6875"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="371" x="432.5" y="1484.6782">POST /register (id_token, Client-Credentials)</text><line style="stroke:#000000;stroke-width:1.0;" x1="1216.5" x2="1258.5" y1="1524.4766" y2="1524.4766"/><line style="stroke:#000000;stroke-width:1.0;" x1="1258.5" x2="1258.5" y1="1524.4766" y2="1537.4766"/><line style="stroke:#000000;stroke-width:1.0;" x1="1217.5" x2="1258.5" y1="1537.4766" y2="1537.4766"/><polygon fill="#000000" points="1227.5,1533.4766,1217.5,1537.4766,1227.5,1541.4766,1223.5,1537.4766" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="132" x="1223.5" y="1518.4673">id_token prüfen</text><line style="stroke:#000000;stroke-width:1.0;" x1="1216.5" x2="1258.5" y1="1635.8438" y2="1635.8438"/><line style="stroke:#000000;stroke-width:1.0;" x1="1258.5" x2="1258.5" y1="1635.8438" y2="1648.8438"/><line style="stroke:#000000;stroke-width:1.0;" x1="1217.5" x2="1258.5" y1="1648.8438" y2="1648.8438"/><polygon fill="#000000" points="1227.5,1644.8438,1217.5,1648.8438,1227.5,1652.8438,1223.5,1648.8438" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="125" x="1223.5" y="1590.2563">Admin Account</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="166" x="1223.5" y="1610.0454">für die Organisation</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="67" x="1223.5" y="1629.8345">anlegen</text><polygon fill="#000000" points="436.5,1678.6328,426.5,1682.6328,436.5,1686.6328,432.5,1682.6328" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="430.5" x2="1210.5" y1="1682.6328" y2="1682.6328"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="187" x="1017.5" y="1676.6235">status, Admin-Account</text><polygon fill="#000000" points="137.5,1712.4219,127.5,1716.4219,137.5,1720.4219,133.5,1716.4219" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="131.5" x2="419.5" y1="1716.4219" y2="1716.4219"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="144" x="269.5" y="1710.4126">Account angelegt</text><!--MD5=[c4693ad18203f7c79a66f52ca4297130]
@startuml
skinparam sequenceMessageAlign direction
skinparam WrapWidth 300
skinparam minClassWidth 150
skinparam BoxPadding 1
scale max 2048 width

skinparam sequence {
ArrowColor black
ArrowFontSize 17
ActorBorderColor black
LifeLineBorderColor black
LifeLineBackgroundColor Gainsboro

ParticipantBorderColor Motivation
ParticipantBackgroundColor Motivation
ParticipantFontName Impact
ParticipantFontSize 20
ParticipantFontColor black
ParticipantBorderColor Black
ParticipantBackgroundColor MOTIVATION

ActorBackgroundColor Gainsboro
ActorFontColor black
ActorFontSize 20
ActorFontName Aapex
}

  actor oa as "Akteur in der Rolle\nOrg-Admin"
    box <size:19>Endgerät</size> #WhiteSmoke
    participant wb as "Frontend des \nRegistrierungs-Dienstes"
    participant au as "Authenticator"
    end box
  participant ko as "Konnektor"
  participant kt as "eHealth KT"
  participant rd as "Registrierungs-Dienst"
  participant ip as "zentraler \nIDP-Dienst"

|||
alt#LightGrey #AliceBlue <size:16>Organisation nicht am Registrierungs-Dienst authentisiert</size>
|||
      oa -> wb: Organisation verifizieren
        activate wb
      wb -> rd:POST /register 
      note right: <size:16>Schnittstelle wird nicht \n<size:16>durch die gematik spezifiziert</size>
        activate rd
      rd - -> wb: Redirect to IDP Authorization Endpoint
        deactivate rd
      |||
      wb -> ip: GET /authorize
        activate au
        activate ip
      ip -> au: Authentication challenge
      au -> ko: SignDocument
        activate ko
      ko -> kt: SICCT command
        activate kt
      kt - -> ko
        deactivate kt
      ko - -> au: Response \nsignedDocument
      |||
        deactivate ko
    
    opt #MistyRose <size:15>Abbruch</size>
      au -> oa: SMC-B nicht freigeschaltet 
      |||
    end
      |||
      au - ->ip: Authentication response
        deactivate au
      ip - -> wb: Authorization code
        deactivate ip
      |||
      wb -> rd: POST /register (Authorization code)
        activate rd
      rd -> ip: POST /tokenEndpoint\n{authorization code}
        activate ip
      ip - -> rd: id_token
        deactivate ip
      |||
      rd -> rd: enthaltene \nProfessionOID auf \ngültige Organisation \nprüfen
      |||
      
    opt #MistyRose <size:15>Abbruch</size>
      rd -> wb: keine gültige ProfessionOID gefunden
      wb -> oa: Authentisierung fehlgeschlagen
      |||
    end  
    
      |||
      rd-> rd: Organisation \nauthentifizieren
      rd - -> wb: status, id_token
        deactivate rd
      wb - -> oa: Verifizierung erfolgreich
        deactivate wb
      |||  
      
      else <size:16>Organisation am Registrierungs-Dienst authentisiert</size>
        |||
        oa -> wb: Admin Account anlegen
          activate wb
        wb -> rd: POST /register (id_token, Client-Credentials)
          activate rd
        rd -> rd: id_token prüfen
        |||
        rd -> rd: Admin Account \nfür die Organisation \nanlegen
        rd - -> wb: status, Admin-Account
          deactivate rd
        wb - -> oa: Account angelegt
          deactivate wb
        |||
end
|||
@enduml

PlantUML version 1.2021.16(Wed Dec 08 17:25:22 UTC 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>