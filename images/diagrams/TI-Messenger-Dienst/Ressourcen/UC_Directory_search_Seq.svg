<<<<<<< HEAD
<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="2637.383px" preserveAspectRatio="none" style="width:2048px;height:2637px;background:#FFFFFF;" version="1.1" viewBox="0 0 2048 2637" width="2048.4711px" zoomAndPan="magnify"><defs/><g><rect fill="#F5F5F5" height="2626.7826" style="stroke:#181818;stroke-width:0.47112951460777547;" width="975.2381" x="980.4205" y="5.6536"/><text fill="#000000" font-family="sans-serif" font-size="16.9607" font-weight="bold" lengthAdjust="spacing" textLength="188.4518" x="1371.458" y="21.3968">VZD-FHIR-Directory</text><text fill="#000000" font-family="sans-serif" font-size="12.2494" font-weight="bold" lengthAdjust="spacing" textLength="4.7113" x="1559.9098" y="22.5079"> </text><rect fill="#DCDCDC" height="2374.1394" style="stroke:#000000;stroke-width:0.9422590292155509;" width="9.4226" x="327.435" y="114.5434"/><rect fill="#DCDCDC" height="193.6563" style="stroke:#000000;stroke-width:0.9422590292155509;" width="9.4226" x="601.6324" y="457.0987"/><rect fill="#DCDCDC" height="176.8944" style="stroke:#000000;stroke-width:0.9422590292155509;" width="9.4226" x="601.6324" y="1085.5928"/><rect fill="#DCDCDC" height="129.9802" style="stroke:#000000;stroke-width:0.9422590292155509;" width="9.4226" x="844.7352" y="488.9367"/><rect fill="#DCDCDC" height="113.2183" style="stroke:#000000;stroke-width:0.9422590292155509;" width="9.4226" x="844.7352" y="1117.4309"/><rect fill="#DCDCDC" height="1002.1882" style="stroke:#000000;stroke-width:0.9422590292155509;" width="9.4226" x="1080.3" y="1486.4946"/><rect fill="#DCDCDC" height="94.5719" style="stroke:#000000;stroke-width:0.9422590292155509;" width="9.4226" x="1362.0354" y="2362.2728"/><rect fill="#DCDCDC" height="688.2024" style="stroke:#000000;stroke-width:0.9422590292155509;" width="9.4226" x="1573.1014" y="706.1495"/><rect fill="#DCDCDC" height="50.4845" style="stroke:#000000;stroke-width:0.9422590292155509;" width="9.4226" x="1846.3566" y="1747.3899"/><rect fill="#DCDCDC" height="131.8647" style="stroke:#000000;stroke-width:0.9422590292155509;" width="9.4226" x="1846.3566" y="1933.1327"/><rect fill="#F0F8FF" height="1061.0058" style="stroke:#000000;stroke-width:1.4133885438233265;" width="1841.6453" x="9.4226" y="371.0366"/><rect fill="#ADD8E6" height="618.8728" style="stroke:#000000;stroke-width:1.4133885438233265;" width="1765.3223" x="18.8452" y="806.5737"/><rect fill="#ADD8E6" height="425.7907" style="stroke:none;stroke-width:0.9422590292155509;" width="1765.3223" x="18.8452" y="999.6559"/><rect fill="#FFE4E1" height="51.3973" style="stroke:#000000;stroke-width:1.4133885438233265;" width="973.3536" x="221.902" y="1591.8288"/><rect fill="#F0F8FF" height="148.9947" style="stroke:#000000;stroke-width:1.4133885438233265;" width="986.5452" x="974.767" y="1679.9742"/><rect fill="#F0F8FF" height="230.375" style="stroke:#000000;stroke-width:1.4133885438233265;" width="1068.5217" x="974.767" y="1865.717"/><rect fill="#FFE4E1" height="70.0437" style="stroke:#000000;stroke-width:1.4133885438233265;" width="973.3536" x="221.902" y="2219.1304"/><line style="stroke:#000000;stroke-width:0.47112951460777547;stroke-dasharray:5.0,5.0;" x1="118.7246" x2="118.7246" y1="105.1208" y2="2529.1999"/><line style="stroke:#000000;stroke-width:0.47112951460777547;stroke-dasharray:5.0,5.0;" x1="332.1463" x2="332.1463" y1="105.1208" y2="2529.1999"/><line style="stroke:#000000;stroke-width:0.47112951460777547;stroke-dasharray:5.0,5.0;" x1="606.3437" x2="606.3437" y1="105.1208" y2="2529.1999"/><line style="stroke:#000000;stroke-width:0.47112951460777547;stroke-dasharray:5.0,5.0;" x1="849.4465" x2="849.4465" y1="105.1208" y2="2529.1999"/><line style="stroke:#000000;stroke-width:0.47112951460777547;stroke-dasharray:5.0,5.0;" x1="1085.0113" x2="1085.0113" y1="105.1208" y2="2529.1999"/><line style="stroke:#000000;stroke-width:0.47112951460777547;stroke-dasharray:5.0,5.0;" x1="1366.7467" x2="1366.7467" y1="105.1208" y2="2529.1999"/><line style="stroke:#000000;stroke-width:0.47112951460777547;stroke-dasharray:5.0,5.0;" x1="1577.8127" x2="1577.8127" y1="105.1208" y2="2529.1999"/><line style="stroke:#000000;stroke-width:0.47112951460777547;stroke-dasharray:5.0,5.0;" x1="1851.0679" x2="1851.0679" y1="105.1208" y2="2529.1999"/><text fill="#000000" font-family="Aapex" font-size="18.8452" lengthAdjust="spacing" textLength="176.2024" x="28.2678" y="78.7394">Akteur in der Rolle</text><text fill="#000000" font-family="Aapex" font-size="18.8452" lengthAdjust="spacing" textLength="149.8192" x="41.4594" y="100.6763">User / User-HBA</text><ellipse cx="119.1958" cy="12.7205" fill="#DCDCDC" rx="7.5381" ry="7.5381" style="stroke:#000000;stroke-width:0.47112951460777547;"/><path d="M119.1958,20.2586 L119.1958,45.6996 M106.9464,27.7966 L131.4451,27.7966 M119.1958,45.6996 L106.9464,59.8334 M119.1958,45.6996 L131.4451,59.8334 " fill="none" style="stroke:#000000;stroke-width:0.47112951460777547;"/><text fill="#000000" font-family="Aapex" font-size="18.8452" lengthAdjust="spacing" textLength="176.2024" x="28.2678" y="2545.7502">Akteur in der Rolle</text><text fill="#000000" font-family="Aapex" font-size="18.8452" lengthAdjust="spacing" textLength="149.8192" x="41.4594" y="2567.6871">User / User-HBA</text><ellipse cx="119.1958" cy="2580.1408" fill="#DCDCDC" rx="7.5381" ry="7.5381" style="stroke:#000000;stroke-width:0.47112951460777547;"/><path d="M119.1958,2587.6789 L119.1958,2613.1199 M106.9464,2595.2169 L131.4451,2595.2169 M119.1958,2613.1199 L106.9464,2627.2537 M119.1958,2613.1199 L131.4451,2627.2537 " fill="none" style="stroke:#000000;stroke-width:0.47112951460777547;"/><rect fill="#EFEFFF" height="35.1286" rx="2.3556" ry="2.3556" style="stroke:#000000;stroke-width:0.47112951460777547;" width="201.6434" x="231.3246" y="69.0499"/><text fill="#000000" font-family="Impact" font-size="18.8452" lengthAdjust="spacing" textLength="186.5673" x="238.8627" y="93.1383">TI-Messenger-Client</text><rect fill="#EFEFFF" height="35.1286" rx="2.3556" ry="2.3556" style="stroke:#000000;stroke-width:0.47112951460777547;" width="201.6434" x="231.3246" y="2528.2576"/><text fill="#000000" font-family="Impact" font-size="18.8452" lengthAdjust="spacing" textLength="186.5673" x="238.8627" y="2552.346">TI-Messenger-Client</text><rect fill="#EFEFFF" height="35.1286" rx="2.3556" ry="2.3556" style="stroke:#000000;stroke-width:0.47112951460777547;" width="201.6434" x="505.522" y="69.0499"/><text fill="#000000" font-family="Impact" font-size="18.8452" lengthAdjust="spacing" textLength="157.3573" x="527.6651" y="93.1383">Messenger Proxy</text><rect fill="#EFEFFF" height="35.1286" rx="2.3556" ry="2.3556" style="stroke:#000000;stroke-width:0.47112951460777547;" width="201.6434" x="505.522" y="2528.2576"/><text fill="#000000" font-family="Impact" font-size="18.8452" lengthAdjust="spacing" textLength="157.3573" x="527.6651" y="2552.346">Messenger Proxy</text><rect fill="#EFEFFF" height="35.1286" rx="2.3556" ry="2.3556" style="stroke:#000000;stroke-width:0.47112951460777547;" width="201.6434" x="748.6248" y="69.0499"/><text fill="#000000" font-family="Impact" font-size="18.8452" lengthAdjust="spacing" textLength="178.087" x="760.403" y="93.1383">Matrix-Homeserver</text><rect fill="#EFEFFF" height="35.1286" rx="2.3556" ry="2.3556" style="stroke:#000000;stroke-width:0.47112951460777547;" width="201.6434" x="748.6248" y="2528.2576"/><text fill="#000000" font-family="Impact" font-size="18.8452" lengthAdjust="spacing" textLength="178.087" x="760.403" y="2552.346">Matrix-Homeserver</text><rect fill="#EFEFFF" height="35.1286" rx="2.3556" ry="2.3556" style="stroke:#000000;stroke-width:0.47112951460777547;" width="201.6434" x="984.1896" y="69.0499"/><text fill="#000000" font-family="Impact" font-size="18.8452" lengthAdjust="spacing" textLength="101.764" x="1034.1293" y="93.1383">FHIR-Proxy</text><rect fill="#EFEFFF" height="35.1286" rx="2.3556" ry="2.3556" style="stroke:#000000;stroke-width:0.47112951460777547;" width="201.6434" x="984.1896" y="2528.2576"/><text fill="#000000" font-family="Impact" font-size="18.8452" lengthAdjust="spacing" textLength="101.764" x="1034.1293" y="2552.346">FHIR-Proxy</text><rect fill="#EFEFFF" height="57.0656" rx="2.3556" ry="2.3556" style="stroke:#000000;stroke-width:0.47112951460777547;" width="201.6434" x="1265.925" y="47.113"/><text fill="#000000" font-family="Impact" font-size="18.8452" lengthAdjust="spacing" textLength="97.9949" x="1317.7493" y="71.2013">PASSporT-</text><text fill="#000000" font-family="Impact" font-size="18.8452" lengthAdjust="spacing" textLength="68.7849" x="1332.3543" y="93.1383">Service</text><rect fill="#EFEFFF" height="57.0656" rx="2.3556" ry="2.3556" style="stroke:#000000;stroke-width:0.47112951460777547;" width="201.6434" x="1265.925" y="2528.2576"/><text fill="#000000" font-family="Impact" font-size="18.8452" lengthAdjust="spacing" textLength="97.9949" x="1317.7493" y="2552.346">PASSporT-</text><text fill="#000000" font-family="Impact" font-size="18.8452" lengthAdjust="spacing" textLength="68.7849" x="1332.3543" y="2574.283">Service</text><rect fill="#EFEFFF" height="35.1286" rx="2.3556" ry="2.3556" style="stroke:#000000;stroke-width:0.47112951460777547;" width="201.6434" x="1476.991" y="69.0499"/><text fill="#000000" font-family="Impact" font-size="18.8452" lengthAdjust="spacing" textLength="120.6092" x="1517.5082" y="93.1383">Auth-Service</text><rect fill="#EFEFFF" height="35.1286" rx="2.3556" ry="2.3556" style="stroke:#000000;stroke-width:0.47112951460777547;" width="201.6434" x="1476.991" y="2528.2576"/><text fill="#000000" font-family="Impact" font-size="18.8452" lengthAdjust="spacing" textLength="120.6092" x="1517.5082" y="2552.346">Auth-Service</text><rect fill="#EFEFFF" height="35.1286" rx="2.3556" ry="2.3556" style="stroke:#000000;stroke-width:0.47112951460777547;" width="201.6434" x="1750.2461" y="69.0499"/><text fill="#000000" font-family="Impact" font-size="18.8452" lengthAdjust="spacing" textLength="136.6276" x="1782.7541" y="93.1383">FHIR-Directory</text><rect fill="#EFEFFF" height="35.1286" rx="2.3556" ry="2.3556" style="stroke:#000000;stroke-width:0.47112951460777547;" width="201.6434" x="1750.2461" y="2528.2576"/><text fill="#000000" font-family="Impact" font-size="18.8452" lengthAdjust="spacing" textLength="136.6276" x="1782.7541" y="2552.346">FHIR-Directory</text><rect fill="#DCDCDC" height="2374.1394" style="stroke:#000000;stroke-width:0.9422590292155509;" width="9.4226" x="327.435" y="114.5434"/><rect fill="#DCDCDC" height="193.6563" style="stroke:#000000;stroke-width:0.9422590292155509;" width="9.4226" x="601.6324" y="457.0987"/><rect fill="#DCDCDC" height="176.8944" style="stroke:#000000;stroke-width:0.9422590292155509;" width="9.4226" x="601.6324" y="1085.5928"/><rect fill="#DCDCDC" height="129.9802" style="stroke:#000000;stroke-width:0.9422590292155509;" width="9.4226" x="844.7352" y="488.9367"/><rect fill="#DCDCDC" height="113.2183" style="stroke:#000000;stroke-width:0.9422590292155509;" width="9.4226" x="844.7352" y="1117.4309"/><rect fill="#DCDCDC" height="1002.1882" style="stroke:#000000;stroke-width:0.9422590292155509;" width="9.4226" x="1080.3" y="1486.4946"/><rect fill="#DCDCDC" height="94.5719" style="stroke:#000000;stroke-width:0.9422590292155509;" width="9.4226" x="1362.0354" y="2362.2728"/><rect fill="#DCDCDC" height="688.2024" style="stroke:#000000;stroke-width:0.9422590292155509;" width="9.4226" x="1573.1014" y="706.1495"/><rect fill="#DCDCDC" height="50.4845" style="stroke:#000000;stroke-width:0.9422590292155509;" width="9.4226" x="1846.3566" y="1747.3899"/><rect fill="#DCDCDC" height="131.8647" style="stroke:#000000;stroke-width:0.9422590292155509;" width="9.4226" x="1846.3566" y="1933.1327"/><path d="M25.441,142.8111 L25.441,199.3467 L942.259,199.3467 L942.259,152.2337 L932.8364,142.8111 L25.441,142.8111 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.47112951460777547;"/><path d="M932.8364,142.8111 L932.8364,152.2337 L942.259,152.2337 L932.8364,142.8111 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.47112951460777547;"/><text fill="#000000" font-family="sans-serif" font-size="12.2494" lengthAdjust="spacing" textLength="3.769" x="233.9158" y="158.8926"> </text><text fill="#000000" font-family="sans-serif" font-size="16.0184" lengthAdjust="spacing" textLength="491.8592" x="233.9158" y="176.6501">Der Akteur ist erfolgreich beim Messenger Service angemeldet</text><text fill="#000000" font-family="sans-serif" font-size="12.2494" lengthAdjust="spacing" textLength="3.769" x="233.9158" y="191.798"> </text><polygon fill="#000000" points="316.1279,248.1969,325.5505,251.966,316.1279,255.735,319.8969,251.966" style="stroke:#000000;stroke-width:0.9422590292155509;"/><line style="stroke:#000000;stroke-width:0.9422590292155509;" x1="119.1958" x2="321.7815" y1="251.966" y2="251.966"/><text fill="#000000" font-family="sans-serif" font-size="16.0184" lengthAdjust="spacing" textLength="185.625" x="125.7916" y="246.3037">gibt Suchparameter ein</text><line style="stroke:#000000;stroke-width:0.9422590292155509;" x1="336.8576" x2="376.4325" y1="321.0968" y2="321.0968"/><line style="stroke:#000000;stroke-width:0.9422590292155509;" x1="376.4325" x2="376.4325" y1="321.0968" y2="333.3462"/><line style="stroke:#000000;stroke-width:0.9422590292155509;" x1="337.7999" x2="376.4325" y1="333.3462" y2="333.3462"/><polygon fill="#000000" points="347.2225,329.5772,337.7999,333.3462,347.2225,337.1153,343.4534,333.3462" style="stroke:#000000;stroke-width:0.9422590292155509;"/><text fill="#000000" font-family="sans-serif" font-size="16.0184" lengthAdjust="spacing" textLength="174.3179" x="343.4534" y="278.1417">prüfe ob noch gültiges</text><text fill="#000000" font-family="sans-serif" font-size="16.0184" lengthAdjust="spacing" textLength="183.7405" x="343.4534" y="296.7881">tim-search-accesstoken</text><text fill="#000000" font-family="sans-serif" font-size="16.0184" lengthAdjust="spacing" textLength="60.3046" x="343.4534" y="315.4346">vorliegt</text><path d="M9.4226,371.0366 L69.7272,371.0366 L69.7272,377.7575 L60.3046,387.1801 L9.4226,387.1801 L9.4226,371.0366 " fill="#D3D3D3" style="stroke:#000000;stroke-width:1.4133885438233265;"/><rect fill="none" height="1061.0058" style="stroke:#000000;stroke-width:1.4133885438233265;" width="1841.6453" x="9.4226" y="371.0366"/><text fill="#000000" font-family="sans-serif" font-size="12.2494" font-weight="bold" lengthAdjust="spacing" textLength="17.9029" x="23.5565" y="383.349">alt</text><text fill="#000000" font-family="sans-serif" font-size="10.3648" font-weight="bold" lengthAdjust="spacing" textLength="4.7113" x="83.8611" y="388.0262">[</text><text fill="#000000" font-family="sans-serif" font-size="15.0761" font-weight="bold" lengthAdjust="spacing" textLength="408.9404" x="88.5723" y="386.9151">kein gültiges tim-search-accesstoken vorhanden</text><text fill="#000000" font-family="sans-serif" font-size="10.3648" font-weight="bold" lengthAdjust="spacing" textLength="4.7113" x="497.5128" y="388.0262">]</text><polygon fill="#000000" points="590.3253,453.3297,599.7479,457.0987,590.3253,460.8677,594.0943,457.0987" style="stroke:#000000;stroke-width:0.9422590292155509;"/><line style="stroke:#000000;stroke-width:0.9422590292155509;" x1="336.8576" x2="595.9788" y1="457.0987" y2="457.0987"/><text fill="#000000" font-family="sans-serif" font-size="16.0184" lengthAdjust="spacing" textLength="220.4886" x="343.4534" y="432.79">GET /_matrix/client/r0/user/</text><text fill="#000000" font-family="sans-serif" font-size="16.0184" lengthAdjust="spacing" textLength="246.8719" x="343.4534" y="451.4364">{userId}/openid/request_token</text><polygon fill="#000000" points="833.4281,485.1677,842.8507,488.9367,833.4281,492.7058,837.1971,488.9367" style="stroke:#000000;stroke-width:0.9422590292155509;"/><line style="stroke:#000000;stroke-width:0.9422590292155509;" x1="611.055" x2="839.0817" y1="488.9367" y2="488.9367"/><text fill="#000000" font-family="sans-serif" font-size="16.0184" lengthAdjust="spacing" textLength="110.2443" x="617.6508" y="483.2744">HTTP Forward</text><polygon fill="#000000" points="621.4198,615.1479,611.9972,618.917,621.4198,622.686,617.6508,618.917" style="stroke:#000000;stroke-width:0.9422590292155509;"/><line style="stroke:#000000;stroke-width:0.9422590292155509;stroke-dasharray:2.0,2.0;" x1="615.7663" x2="848.5043" y1="618.917" y2="618.917"/><text fill="#000000" font-family="sans-serif" font-size="16.0184" lengthAdjust="spacing" textLength="206.3547" x="631.7847" y="538.669">HTTP 200 OK, Result body</text><text fill="#000000" font-family="sans-serif" font-size="16.0184" lengthAdjust="spacing" textLength="133.8008" x="631.7847" y="557.3154">{"access_token":</text><text fill="#000000" font-family="sans-serif" font-size="16.0184" lengthAdjust="spacing" textLength="189.3941" x="631.7847" y="575.9618">"Matrix-OpenID-Token",</text><text fill="#000000" font-family="sans-serif" font-size="16.0184" lengthAdjust="spacing" textLength="184.6828" x="631.7847" y="594.6082">"matrix_server_name":</text><text fill="#000000" font-family="sans-serif" font-size="16.0184" lengthAdjust="spacing" textLength="149.8192" x="631.7847" y="613.2547">"example.com",...}</text><polygon fill="#000000" points="347.2225,646.986,337.7999,650.755,347.2225,654.524,343.4534,650.755" style="stroke:#000000;stroke-width:0.9422590292155509;"/><line style="stroke:#000000;stroke-width:0.9422590292155509;stroke-dasharray:2.0,2.0;" x1="341.5689" x2="605.4014" y1="650.755" y2="650.755"/><text fill="#000000" font-family="sans-serif" font-size="16.0184" lengthAdjust="spacing" textLength="110.2443" x="489.5036" y="645.0927">HTTP Forward</text><polygon fill="#000000" points="1561.7943,702.3805,1571.2169,706.1495,1561.7943,709.9186,1565.5634,706.1495" style="stroke:#000000;stroke-width:0.9422590292155509;"/><line style="stroke:#000000;stroke-width:0.9422590292155509;" x1="336.8576" x2="1567.4479" y1="706.1495" y2="706.1495"/><text fill="#000000" font-family="sans-serif" font-size="16.0184" lengthAdjust="spacing" textLength="513.5312" x="343.4534" y="700.4872">GET /tim-authenticate... (Auth Header mit Matrix-OpenID-Token)</text><line style="stroke:#000000;stroke-width:0.9422590292155509;" x1="1582.524" x2="1622.0989" y1="756.634" y2="756.634"/><line style="stroke:#000000;stroke-width:0.9422590292155509;" x1="1622.0989" x2="1622.0989" y1="756.634" y2="768.8834"/><line style="stroke:#000000;stroke-width:0.9422590292155509;" x1="1583.4663" x2="1622.0989" y1="768.8834" y2="768.8834"/><polygon fill="#000000" points="1592.8889,765.1143,1583.4663,768.8834,1592.8889,772.6524,1589.1199,768.8834" style="stroke:#000000;stroke-width:0.9422590292155509;"/><text fill="#000000" font-family="sans-serif" font-size="16.0184" lengthAdjust="spacing" textLength="233.6802" x="1589.1199" y="732.3253">Prüfe ob matrix_server_name</text><text fill="#000000" font-family="sans-serif" font-size="16.0184" lengthAdjust="spacing" textLength="250.6409" x="1589.1199" y="750.9717">in Föderationsliste enthalten ist</text><path d="M18.8452,806.5737 L79.1498,806.5737 L79.1498,813.2947 L69.7272,822.7173 L18.8452,822.7173 L18.8452,806.5737 " fill="#D3D3D3" style="stroke:#000000;stroke-width:1.4133885438233265;"/><rect fill="none" height="618.8728" style="stroke:#000000;stroke-width:1.4133885438233265;" width="1765.3223" x="18.8452" y="806.5737"/><text fill="#000000" font-family="sans-serif" font-size="12.2494" font-weight="bold" lengthAdjust="spacing" textLength="17.9029" x="32.9791" y="818.8861">alt</text><text fill="#000000" font-family="sans-serif" font-size="10.3648" font-weight="bold" lengthAdjust="spacing" textLength="4.7113" x="93.2836" y="823.5634">[</text><text fill="#000000" font-family="sans-serif" font-size="15.0761" font-weight="bold" lengthAdjust="spacing" textLength="493.7437" x="97.9949" y="822.4523">matrix_server_name nicht in der Föderationsliste enthalten</text><text fill="#000000" font-family="sans-serif" font-size="10.3648" font-weight="bold" lengthAdjust="spacing" textLength="4.7113" x="591.7387" y="823.5634">]</text><polygon fill="#000000" points="347.2225,888.8668,337.7999,892.6358,347.2225,896.4049,343.4534,892.6358" style="stroke:#000000;stroke-width:0.9422590292155509;"/><line style="stroke:#000000;stroke-width:0.9422590292155509;stroke-dasharray:2.0,2.0;" x1="341.5689" x2="1572.1592" y1="892.6358" y2="892.6358"/><text fill="#000000" font-family="sans-serif" font-size="16.0184" lengthAdjust="spacing" textLength="76.323" x="1460.0304" y="868.3271">HTTP 401</text><text fill="#000000" font-family="sans-serif" font-size="16.0184" lengthAdjust="spacing" textLength="106.4753" x="1460.0304" y="886.9735">Unauthorized</text><line style="stroke:#000000;stroke-width:0.9422590292155509;" x1="336.8576" x2="376.4325" y1="924.4739" y2="924.4739"/><line style="stroke:#000000;stroke-width:0.9422590292155509;" x1="376.4325" x2="376.4325" y1="924.4739" y2="936.7233"/><line style="stroke:#000000;stroke-width:0.9422590292155509;" x1="337.7999" x2="376.4325" y1="936.7233" y2="936.7233"/><polygon fill="#000000" points="347.2225,932.9542,337.7999,936.7233,347.2225,940.4923,343.4534,936.7233" style="stroke:#000000;stroke-width:0.9422590292155509;"/><text fill="#000000" font-family="sans-serif" font-size="16.0184" lengthAdjust="spacing" textLength="131.9163" x="343.4534" y="918.8116">Session beenden</text><polygon fill="#000000" points="129.5606,964.7923,120.138,968.5613,129.5606,972.3303,125.7916,968.5613" style="stroke:#000000;stroke-width:0.9422590292155509;"/><line style="stroke:#000000;stroke-width:0.9422590292155509;stroke-dasharray:2.0,2.0;" x1="123.9071" x2="326.4928" y1="968.5613" y2="968.5613"/><text fill="#000000" font-family="sans-serif" font-size="16.0184" lengthAdjust="spacing" textLength="180.9137" x="139.9255" y="962.899">Suche nicht erfolgreich</text><line style="stroke:#000000;stroke-width:0.9422590292155509;stroke-dasharray:2.0,2.0;" x1="18.8452" x2="1784.1675" y1="1000.5981" y2="1000.5981"/><text fill="#000000" font-family="sans-serif" font-size="10.3648" font-weight="bold" lengthAdjust="spacing" textLength="4.7113" x="23.5565" y="1015.7032">[</text><text fill="#000000" font-family="sans-serif" font-size="15.0761" font-weight="bold" lengthAdjust="spacing" textLength="446.6308" x="28.2678" y="1014.5921">matrix_server_name in der Föderationsliste enthalten</text><text fill="#000000" font-family="sans-serif" font-size="10.3648" font-weight="bold" lengthAdjust="spacing" textLength="4.7113" x="474.8986" y="1015.7032">]</text><polygon fill="#000000" points="621.4198,1081.8238,611.9972,1085.5928,621.4198,1089.3619,617.6508,1085.5928" style="stroke:#000000;stroke-width:0.9422590292155509;"/><line style="stroke:#000000;stroke-width:0.9422590292155509;" x1="615.7663" x2="1572.1592" y1="1085.5928" y2="1085.5928"/><text fill="#000000" font-family="sans-serif" font-size="16.0184" lengthAdjust="spacing" textLength="179.0292" x="1274.4053" y="1061.2841">GET /openid/userinfo/?</text><text fill="#000000" font-family="sans-serif" font-size="16.0184" lengthAdjust="spacing" textLength="292.1003" x="1274.4053" y="1079.9305">access_token=Matrix-OpenID-Token)</text><polygon fill="#000000" points="833.4281,1113.6618,842.8507,1117.4309,833.4281,1121.1999,837.1971,1117.4309" style="stroke:#000000;stroke-width:0.9422590292155509;"/><line style="stroke:#000000;stroke-width:0.9422590292155509;" x1="611.055" x2="839.0817" y1="1117.4309" y2="1117.4309"/><text fill="#000000" font-family="sans-serif" font-size="16.0184" lengthAdjust="spacing" textLength="110.2443" x="617.6508" y="1111.7686">HTTP Forward</text><line style="stroke:#000000;stroke-width:0.9422590292155509;" x1="854.1578" x2="893.7327" y1="1149.2689" y2="1149.2689"/><line style="stroke:#000000;stroke-width:0.9422590292155509;" x1="893.7327" x2="893.7327" y1="1149.2689" y2="1161.5183"/><line style="stroke:#000000;stroke-width:0.9422590292155509;" x1="855.1001" x2="893.7327" y1="1161.5183" y2="1161.5183"/><polygon fill="#000000" points="864.5227,1157.7493,855.1001,1161.5183,864.5227,1165.2873,860.7536,1161.5183" style="stroke:#000000;stroke-width:0.9422590292155509;"/><text fill="#000000" font-family="sans-serif" font-size="16.0184" lengthAdjust="spacing" textLength="212.9505" x="860.7536" y="1143.6066">prüfe Matrix-OpenID-token</text><polygon fill="#000000" points="621.4198,1226.8801,611.9972,1230.6492,621.4198,1234.4182,617.6508,1230.6492" style="stroke:#000000;stroke-width:0.9422590292155509;"/><line style="stroke:#000000;stroke-width:0.9422590292155509;stroke-dasharray:2.0,2.0;" x1="615.7663" x2="848.5043" y1="1230.6492" y2="1230.6492"/><text fill="#000000" font-family="sans-serif" font-size="16.0184" lengthAdjust="spacing" textLength="104.5908" x="695.8583" y="1187.694">HTTP 200 OK</text><text fill="#000000" font-family="sans-serif" font-size="16.0184" lengthAdjust="spacing" textLength="100.8217" x="695.8583" y="1206.3405">(Result Body</text><text fill="#000000" font-family="sans-serif" font-size="16.0184" lengthAdjust="spacing" textLength="146.9924" x="695.8583" y="1224.9869">MXID des Nutzers)</text><polygon fill="#000000" points="1561.7943,1258.7182,1571.2169,1262.4872,1561.7943,1266.2563,1565.5634,1262.4872" style="stroke:#000000;stroke-width:0.9422590292155509;"/><line style="stroke:#000000;stroke-width:0.9422590292155509;stroke-dasharray:2.0,2.0;" x1="606.3437" x2="1567.4479" y1="1262.4872" y2="1262.4872"/><text fill="#000000" font-family="sans-serif" font-size="16.0184" lengthAdjust="spacing" textLength="110.2443" x="612.9395" y="1256.8249">HTTP Forward</text><line style="stroke:#000000;stroke-width:0.9422590292155509;" x1="1582.524" x2="1622.0989" y1="1312.9717" y2="1312.9717"/><line style="stroke:#000000;stroke-width:0.9422590292155509;" x1="1622.0989" x2="1622.0989" y1="1312.9717" y2="1325.2211"/><line style="stroke:#000000;stroke-width:0.9422590292155509;" x1="1583.4663" x2="1622.0989" y1="1325.2211" y2="1325.2211"/><polygon fill="#000000" points="1592.8889,1321.452,1583.4663,1325.2211,1592.8889,1328.9901,1589.1199,1325.2211" style="stroke:#000000;stroke-width:0.9422590292155509;"/><text fill="#000000" font-family="sans-serif" font-size="16.0184" lengthAdjust="spacing" textLength="62.1891" x="1589.1199" y="1288.663">erzeuge</text><text fill="#000000" font-family="sans-serif" font-size="16.0184" lengthAdjust="spacing" textLength="183.7405" x="1589.1199" y="1307.3094">tim-search-accesstoken</text><polygon fill="#000000" points="347.2225,1390.5829,337.7999,1394.352,347.2225,1398.121,343.4534,1394.352" style="stroke:#000000;stroke-width:0.9422590292155509;"/><line style="stroke:#000000;stroke-width:0.9422590292155509;stroke-dasharray:2.0,2.0;" x1="341.5689" x2="1576.8705" y1="1394.352" y2="1394.352"/><text fill="#000000" font-family="sans-serif" font-size="16.0184" lengthAdjust="spacing" textLength="109.302" x="1342.248" y="1351.3968">HTTP 200 OK,</text><text fill="#000000" font-family="sans-serif" font-size="16.0184" lengthAdjust="spacing" textLength="183.7405" x="1342.248" y="1370.0432">tim-search-accesstoken</text><text fill="#000000" font-family="sans-serif" font-size="16.0184" lengthAdjust="spacing" textLength="228.9689" x="1342.248" y="1388.6897">(inklusive MXID des Nutzers)</text><polygon fill="#000000" points="1068.9929,1482.7256,1078.4155,1486.4946,1068.9929,1490.2636,1072.7619,1486.4946" style="stroke:#000000;stroke-width:0.9422590292155509;"/><line style="stroke:#000000;stroke-width:0.9422590292155509;" x1="336.8576" x2="1074.6464" y1="1486.4946" y2="1486.4946"/><text fill="#000000" font-family="sans-serif" font-size="16.0184" lengthAdjust="spacing" textLength="573.8357" x="343.4534" y="1480.8323">GET /tim-search?... (Auth Header mit tim-search-accesstoken inkl. MXID)</text><line style="stroke:#000000;stroke-width:0.9422590292155509;" x1="1089.7226" x2="1129.2974" y1="1541.8891" y2="1541.8891"/><line style="stroke:#000000;stroke-width:0.9422590292155509;" x1="1129.2974" x2="1129.2974" y1="1541.8891" y2="1554.1385"/><line style="stroke:#000000;stroke-width:0.9422590292155509;" x1="1090.6648" x2="1129.2974" y1="1554.1385" y2="1554.1385"/><polygon fill="#000000" points="1100.0874,1550.3695,1090.6648,1554.1385,1100.0874,1557.9075,1096.3184,1554.1385" style="stroke:#000000;stroke-width:0.9422590292155509;"/><text fill="#000000" font-family="sans-serif" font-size="16.0184" lengthAdjust="spacing" textLength="229.9112" x="1096.3184" y="1536.2268">prüfe tim-search-accesstoken</text><path d="M221.902,1591.8288 L287.8601,1591.8288 L287.8601,1598.5498 L278.4375,1607.9724 L221.902,1607.9724 L221.902,1591.8288 " fill="#D3D3D3" style="stroke:#000000;stroke-width:1.4133885438233265;"/><rect fill="none" height="51.3973" style="stroke:#000000;stroke-width:1.4133885438233265;" width="973.3536" x="221.902" y="1591.8288"/><text fill="#000000" font-family="sans-serif" font-size="12.2494" font-weight="bold" lengthAdjust="spacing" textLength="23.5565" x="236.0359" y="1604.1412">opt</text><text fill="#000000" font-family="sans-serif" font-size="10.3648" font-weight="bold" lengthAdjust="spacing" textLength="4.7113" x="301.994" y="1608.8185">[</text><text fill="#000000" font-family="sans-serif" font-size="15.0761" font-weight="bold" lengthAdjust="spacing" textLength="69.7272" x="306.7053" y="1607.7074">Abbruch</text><text fill="#000000" font-family="sans-serif" font-size="10.3648" font-weight="bold" lengthAdjust="spacing" textLength="4.7113" x="376.4325" y="1608.8185">]</text><polygon fill="#000000" points="347.2225,1631.919,337.7999,1635.6881,347.2225,1639.4571,343.4534,1635.6881" style="stroke:#000000;stroke-width:0.9422590292155509;"/><line style="stroke:#000000;stroke-width:0.9422590292155509;stroke-dasharray:2.0,2.0;" x1="341.5689" x2="1079.3577" y1="1635.6881" y2="1635.6881"/><text fill="#000000" font-family="sans-serif" font-size="16.0184" lengthAdjust="spacing" textLength="311.8877" x="761.8164" y="1630.0258">kein tim-search-accesstoken vorhanden</text><path d="M974.767,1679.9742 L1035.0715,1679.9742 L1035.0715,1686.6952 L1025.649,1696.1178 L974.767,1696.1178 L974.767,1679.9742 " fill="#D3D3D3" style="stroke:#000000;stroke-width:1.4133885438233265;"/><rect fill="none" height="148.9947" style="stroke:#000000;stroke-width:1.4133885438233265;" width="986.5452" x="974.767" y="1679.9742"/><text fill="#000000" font-family="sans-serif" font-size="12.2494" font-weight="bold" lengthAdjust="spacing" textLength="17.9029" x="988.9009" y="1692.2866">alt</text><text fill="#000000" font-family="sans-serif" font-size="10.3648" font-weight="bold" lengthAdjust="spacing" textLength="4.7113" x="1049.2054" y="1696.9639">[</text><text fill="#000000" font-family="sans-serif" font-size="15.0761" font-weight="bold" lengthAdjust="spacing" textLength="384.4417" x="1053.9167" y="1695.8528">TIHealthcareService-Einträge werden gesucht</text><text fill="#000000" font-family="sans-serif" font-size="10.3648" font-weight="bold" lengthAdjust="spacing" textLength="4.7113" x="1438.3584" y="1696.9639">]</text><polygon fill="#000000" points="1835.0495,1743.6209,1844.472,1747.3899,1835.0495,1751.159,1838.8185,1747.3899" style="stroke:#000000;stroke-width:0.9422590292155509;"/><line style="stroke:#000000;stroke-width:0.9422590292155509;" x1="1089.7226" x2="1840.703" y1="1747.3899" y2="1747.3899"/><text fill="#000000" font-family="sans-serif" font-size="16.0184" lengthAdjust="spacing" textLength="65.0159" x="1096.3184" y="1741.7276">GET /?...</text><polygon fill="#000000" points="1100.0874,1794.1054,1090.6648,1797.8744,1100.0874,1801.6434,1096.3184,1797.8744" style="stroke:#000000;stroke-width:0.9422590292155509;"/><line style="stroke:#000000;stroke-width:0.9422590292155509;stroke-dasharray:2.0,2.0;" x1="1094.4339" x2="1850.1256" y1="1797.8744" y2="1797.8744"/><text fill="#000000" font-family="sans-serif" font-size="16.0184" lengthAdjust="spacing" textLength="104.5908" x="1700.3064" y="1773.5657">HTTP 200 OK</text><text fill="#000000" font-family="sans-serif" font-size="16.0184" lengthAdjust="spacing" textLength="144.1656" x="1700.3064" y="1792.2121">(Result Body json)</text><path d="M974.767,1865.717 L1035.0715,1865.717 L1035.0715,1872.438 L1025.649,1881.8606 L974.767,1881.8606 L974.767,1865.717 " fill="#D3D3D3" style="stroke:#000000;stroke-width:1.4133885438233265;"/><rect fill="none" height="230.375" style="stroke:#000000;stroke-width:1.4133885438233265;" width="1068.5217" x="974.767" y="1865.717"/><text fill="#000000" font-family="sans-serif" font-size="12.2494" font-weight="bold" lengthAdjust="spacing" textLength="17.9029" x="988.9009" y="1878.0294">alt</text><text fill="#000000" font-family="sans-serif" font-size="10.3648" font-weight="bold" lengthAdjust="spacing" textLength="4.7113" x="1049.2054" y="1882.7067">[</text><text fill="#000000" font-family="sans-serif" font-size="15.0761" font-weight="bold" lengthAdjust="spacing" textLength="368.4233" x="1053.9167" y="1881.5956">TIPractitionerRole-Einträge werden gesucht</text><text fill="#000000" font-family="sans-serif" font-size="10.3648" font-weight="bold" lengthAdjust="spacing" textLength="4.7113" x="1422.34" y="1882.7067">]</text><polygon fill="#000000" points="1835.0495,1929.3637,1844.472,1933.1327,1835.0495,1936.9018,1838.8185,1933.1327" style="stroke:#000000;stroke-width:0.9422590292155509;"/><line style="stroke:#000000;stroke-width:0.9422590292155509;" x1="1089.7226" x2="1840.703" y1="1933.1327" y2="1933.1327"/><text fill="#000000" font-family="sans-serif" font-size="16.0184" lengthAdjust="spacing" textLength="336.3865" x="1096.3184" y="1927.4704">GET /?...&lt;MXID des anfragenden Nutzers&gt;</text><line style="stroke:#000000;stroke-width:0.9422590292155509;" x1="1855.7792" x2="1895.354" y1="2002.2636" y2="2002.2636"/><line style="stroke:#000000;stroke-width:0.9422590292155509;" x1="1895.354" x2="1895.354" y1="2002.2636" y2="2014.513"/><line style="stroke:#000000;stroke-width:0.9422590292155509;" x1="1856.7214" x2="1895.354" y1="2014.513" y2="2014.513"/><polygon fill="#000000" points="1866.144,2010.744,1856.7214,2014.513,1866.144,2018.282,1862.375,2014.513" style="stroke:#000000;stroke-width:0.9422590292155509;"/><text fill="#000000" font-family="sans-serif" font-size="16.0184" lengthAdjust="spacing" textLength="164.8953" x="1862.375" y="1959.3085">Prüfung, ob MXID im</text><text fill="#000000" font-family="sans-serif" font-size="16.0184" lengthAdjust="spacing" textLength="148.8769" x="1862.375" y="1977.9549">TIEndpoint-Eintrag</text><text fill="#000000" font-family="sans-serif" font-size="16.0184" lengthAdjust="spacing" textLength="108.3598" x="1862.375" y="1996.6013">vorhanden ist</text><polygon fill="#000000" points="1100.0874,2061.2284,1090.6648,2064.9975,1100.0874,2068.7665,1096.3184,2064.9975" style="stroke:#000000;stroke-width:0.9422590292155509;"/><line style="stroke:#000000;stroke-width:0.9422590292155509;stroke-dasharray:2.0,2.0;" x1="1094.4339" x2="1850.1256" y1="2064.9975" y2="2064.9975"/><text fill="#000000" font-family="sans-serif" font-size="16.0184" lengthAdjust="spacing" textLength="104.5908" x="1493.9517" y="2040.6888">HTTP 200 OK</text><text fill="#000000" font-family="sans-serif" font-size="16.0184" lengthAdjust="spacing" textLength="350.5204" x="1493.9517" y="2059.3352">(Result Body json mit TIPractitioner-Eintrag)</text><line style="stroke:#000000;stroke-width:0.9422590292155509;" x1="1089.7226" x2="1129.2974" y1="2169.1907" y2="2169.1907"/><line style="stroke:#000000;stroke-width:0.9422590292155509;" x1="1129.2974" x2="1129.2974" y1="2169.1907" y2="2181.4401"/><line style="stroke:#000000;stroke-width:0.9422590292155509;" x1="1090.6648" x2="1129.2974" y1="2181.4401" y2="2181.4401"/><polygon fill="#000000" points="1100.0874,2177.671,1090.6648,2181.4401,1100.0874,2185.2091,1096.3184,2181.4401" style="stroke:#000000;stroke-width:0.9422590292155509;"/><text fill="#000000" font-family="sans-serif" font-size="16.0184" lengthAdjust="spacing" textLength="161.1263" x="1096.3184" y="2144.882">MXID enthalten und</text><text fill="#000000" font-family="sans-serif" font-size="16.0184" lengthAdjust="spacing" textLength="221.4309" x="1096.3184" y="2163.5284">TIEndpoint.status == active</text><path d="M221.902,2219.1304 L287.8601,2219.1304 L287.8601,2225.8514 L278.4375,2235.274 L221.902,2235.274 L221.902,2219.1304 " fill="#D3D3D3" style="stroke:#000000;stroke-width:1.4133885438233265;"/><rect fill="none" height="70.0437" style="stroke:#000000;stroke-width:1.4133885438233265;" width="973.3536" x="221.902" y="2219.1304"/><text fill="#000000" font-family="sans-serif" font-size="12.2494" font-weight="bold" lengthAdjust="spacing" textLength="23.5565" x="236.0359" y="2231.4428">opt</text><text fill="#000000" font-family="sans-serif" font-size="10.3648" font-weight="bold" lengthAdjust="spacing" textLength="4.7113" x="301.994" y="2236.1201">[</text><text fill="#000000" font-family="sans-serif" font-size="15.0761" font-weight="bold" lengthAdjust="spacing" textLength="69.7272" x="306.7053" y="2235.009">Abbruch</text><text fill="#000000" font-family="sans-serif" font-size="10.3648" font-weight="bold" lengthAdjust="spacing" textLength="4.7113" x="376.4325" y="2236.1201">]</text><polygon fill="#000000" points="347.2225,2277.867,337.7999,2281.6361,347.2225,2285.4051,343.4534,2281.6361" style="stroke:#000000;stroke-width:0.9422590292155509;"/><line style="stroke:#000000;stroke-width:0.9422590292155509;stroke-dasharray:2.0,2.0;" x1="341.5689" x2="1079.3577" y1="2281.6361" y2="2281.6361"/><text fill="#000000" font-family="sans-serif" font-size="16.0184" lengthAdjust="spacing" textLength="259.1212" x="809.8716" y="2257.3274">kein passender Eintrag gefunden</text><text fill="#000000" font-family="sans-serif" font-size="16.0184" lengthAdjust="spacing" textLength="250.6409" x="809.8716" y="2275.9738">oder TIEndpoint.status == false</text><polygon fill="#000000" points="1350.7283,2358.5038,1360.1509,2362.2728,1350.7283,2366.0419,1354.4974,2362.2728" style="stroke:#000000;stroke-width:0.9422590292155509;"/><line style="stroke:#000000;stroke-width:0.9422590292155509;" x1="1089.7226" x2="1356.3819" y1="2362.2728" y2="2362.2728"/><text fill="#000000" font-family="sans-serif" font-size="16.0184" lengthAdjust="spacing" textLength="64.0736" x="1096.3184" y="2337.9641">Request</text><text fill="#000000" font-family="sans-serif" font-size="16.0184" lengthAdjust="spacing" textLength="226.1422" x="1096.3184" y="2356.6105">erzeuge PASSporT (MXIDs...)</text><line style="stroke:#000000;stroke-width:0.9422590292155509;" x1="1371.458" x2="1411.0329" y1="2412.7573" y2="2412.7573"/><line style="stroke:#000000;stroke-width:0.9422590292155509;" x1="1411.0329" x2="1411.0329" y1="2412.7573" y2="2425.0067"/><line style="stroke:#000000;stroke-width:0.9422590292155509;" x1="1372.4003" x2="1411.0329" y1="2425.0067" y2="2425.0067"/><polygon fill="#000000" points="1381.8229,2421.2376,1372.4003,2425.0067,1381.8229,2428.7757,1378.0538,2425.0067" style="stroke:#000000;stroke-width:0.9422590292155509;"/><text fill="#000000" font-family="sans-serif" font-size="16.0184" lengthAdjust="spacing" textLength="143.2234" x="1378.0538" y="2388.4486">Erzeuge PASSporT</text><text fill="#000000" font-family="sans-serif" font-size="16.0184" lengthAdjust="spacing" textLength="151.7037" x="1378.0538" y="2407.095">(Attribut orig, dest)</text><polygon fill="#000000" points="1100.0874,2453.0757,1090.6648,2456.8447,1100.0874,2460.6138,1096.3184,2456.8447" style="stroke:#000000;stroke-width:0.9422590292155509;"/><line style="stroke:#000000;stroke-width:0.9422590292155509;stroke-dasharray:2.0,2.0;" x1="1094.4339" x2="1365.8045" y1="2456.8447" y2="2456.8447"/><text fill="#000000" font-family="sans-serif" font-size="16.0184" lengthAdjust="spacing" textLength="249.6986" x="1110.4523" y="2451.1824">/?PASSporT=[PASSporT-String].</text><polygon fill="#000000" points="342.5112,2484.9137,333.0886,2488.6828,342.5112,2492.4518,338.7421,2488.6828" style="stroke:#000000;stroke-width:0.9422590292155509;"/><line style="stroke:#000000;stroke-width:0.9422590292155509;stroke-dasharray:2.0,2.0;" x1="336.8576" x2="1084.069" y1="2488.6828" y2="2488.6828"/><text fill="#000000" font-family="sans-serif" font-size="16.0184" lengthAdjust="spacing" textLength="281.7354" x="796.68" y="2483.0205">HTTP 200 OK (MXID und PASSporT)</text><!--MD5=[3ba7398d73daf613086a43879ceffe98]
=======
<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="2630px" preserveAspectRatio="none" style="width:1926px;height:2630px;background:#FFFFFF;" version="1.1" viewBox="0 0 1926 2630" width="1926px" zoomAndPan="magnify"><defs/><g><rect fill="#F5F5F5" height="2618.6484" style="stroke:#181818;stroke-width:0.5;" width="823" x="1004.5" y="6"/><text fill="#000000" font-family="sans-serif" font-size="18" font-weight="bold" lengthAdjust="spacing" textLength="200" x="1313.5" y="22.708">VZD-FHIR-Directory</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="5" x="1513.5" y="23.8872"> </text><rect fill="#DCDCDC" height="2350.5234" style="stroke:#000000;stroke-width:1.0;" width="10" x="342.5" y="121.5625"/><rect fill="#DCDCDC" height="126.3672" style="stroke:#000000;stroke-width:1.0;" width="10" x="633.5" y="524.6875"/><rect fill="#DCDCDC" height="148.1563" style="stroke:#000000;stroke-width:1.0;" width="10" x="633.5" y="1132.3281"/><rect fill="#DCDCDC" height="58.7891" style="stroke:#000000;stroke-width:1.0;" width="10" x="857.5" y="558.4766"/><rect fill="#DCDCDC" height="80.5781" style="stroke:#000000;stroke-width:1.0;" width="10" x="857.5" y="1166.1172"/><rect fill="#DCDCDC" height="959.6563" style="stroke:#000000;stroke-width:1.0;" width="10" x="1110.5" y="1478.6406"/><rect fill="#DCDCDC" height="671.0078" style="stroke:#000000;stroke-width:1.0;" width="10" x="1378.5" y="709.8438"/><rect fill="#DCDCDC" height="33.7891" style="stroke:#000000;stroke-width:1.0;" width="10" x="1711.5" y="1800.3125"/><rect fill="#DCDCDC" height="120.1563" style="stroke:#000000;stroke-width:1.0;" width="10" x="1711.5" y="1977.6484"/><rect fill="#F0F8FF" height="987.5" style="stroke:#000000;stroke-width:1.5;" width="1604.5" x="10" y="433.3516"/><rect fill="#ADD8E6" height="557.8516" style="stroke:#000000;stroke-width:1.5;" width="1582.5" x="20" y="856"/><rect fill="#ADD8E6" height="352.9375" style="stroke:none;stroke-width:1.0;" width="1582.5" x="20" y="1060.9141"/><rect fill="#FFE4E1" height="79.5469" style="stroke:#000000;stroke-width:1.5;" width="1002" x="230.5" y="1590.4297"/><rect fill="#F0F8FF" height="158.125" style="stroke:#000000;stroke-width:1.5;" width="835" x="998.5" y="1708.9766"/><rect fill="#F0F8FF" height="224.7031" style="stroke:#000000;stroke-width:1.5;" width="922" x="998.5" y="1906.1016"/><rect fill="#FFE4E1" height="99.3359" style="stroke:#000000;stroke-width:1.5;" width="1002" x="230.5" y="2281.1719"/><line style="stroke:#000000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="126" x2="126" y1="111.5625" y2="2515.0859"/><line style="stroke:#000000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="347.5" x2="347.5" y1="111.5625" y2="2515.0859"/><line style="stroke:#000000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="638.5" x2="638.5" y1="111.5625" y2="2515.0859"/><line style="stroke:#000000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="862.5" x2="862.5" y1="111.5625" y2="2515.0859"/><line style="stroke:#000000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1115.5" x2="1115.5" y1="111.5625" y2="2515.0859"/><line style="stroke:#000000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1383.5" x2="1383.5" y1="111.5625" y2="2515.0859"/><line style="stroke:#000000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1716.5" x2="1716.5" y1="111.5625" y2="2515.0859"/><text fill="#000000" font-family="Aapex" font-size="20" lengthAdjust="spacing" textLength="187" x="30" y="83.5645">Akteur in der Rolle</text><text fill="#000000" font-family="Aapex" font-size="20" lengthAdjust="spacing" textLength="159" x="44" y="106.8457">User / User-HBA</text><ellipse cx="126.5" cy="13.5" fill="#DCDCDC" rx="8" ry="8" style="stroke:#000000;stroke-width:0.5;"/><path d="M126.5,21.5 L126.5,48.5 M113.5,29.5 L139.5,29.5 M126.5,48.5 L113.5,63.5 M126.5,48.5 L139.5,63.5 " fill="none" style="stroke:#000000;stroke-width:0.5;"/><text fill="#000000" font-family="Aapex" font-size="20" lengthAdjust="spacing" textLength="187" x="30" y="2532.6504">Akteur in der Rolle</text><text fill="#000000" font-family="Aapex" font-size="20" lengthAdjust="spacing" textLength="159" x="44" y="2555.9316">User / User-HBA</text><ellipse cx="126.5" cy="2569.1484" fill="#DCDCDC" rx="8" ry="8" style="stroke:#000000;stroke-width:0.5;"/><path d="M126.5,2577.1484 L126.5,2604.1484 M113.5,2585.1484 L139.5,2585.1484 M126.5,2604.1484 L113.5,2619.1484 M126.5,2604.1484 L139.5,2619.1484 " fill="none" style="stroke:#000000;stroke-width:0.5;"/><rect fill="#EFEFFF" height="37.2813" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="214" x="240.5" y="73.2813"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="198" x="248.5" y="98.8457">TI-Messenger-Client</text><rect fill="#EFEFFF" height="37.2813" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="214" x="240.5" y="2514.0859"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="198" x="248.5" y="2539.6504">TI-Messenger-Client</text><rect fill="#EFEFFF" height="37.2813" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="214" x="531.5" y="73.2813"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="167" x="555" y="98.8457">Messenger Proxy</text><rect fill="#EFEFFF" height="37.2813" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="214" x="531.5" y="2514.0859"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="167" x="555" y="2539.6504">Messenger Proxy</text><rect fill="#EFEFFF" height="37.2813" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="214" x="755.5" y="73.2813"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="189" x="768" y="98.8457">Matrix-Homeserver</text><rect fill="#EFEFFF" height="37.2813" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="214" x="755.5" y="2514.0859"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="189" x="768" y="2539.6504">Matrix-Homeserver</text><rect fill="#EFEFFF" height="37.2813" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="214" x="1008.5" y="73.2813"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="108" x="1061.5" y="98.8457">FHIR-Proxy</text><rect fill="#EFEFFF" height="37.2813" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="214" x="1008.5" y="2514.0859"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="108" x="1061.5" y="2539.6504">FHIR-Proxy</text><rect fill="#EFEFFF" height="37.2813" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="214" x="1276.5" y="73.2813"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="128" x="1319.5" y="98.8457">Auth-Service</text><rect fill="#EFEFFF" height="37.2813" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="214" x="1276.5" y="2514.0859"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="128" x="1319.5" y="2539.6504">Auth-Service</text><rect fill="#EFEFFF" height="37.2813" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="214" x="1609.5" y="73.2813"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="145" x="1644" y="98.8457">FHIR-Directory</text><rect fill="#EFEFFF" height="37.2813" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="214" x="1609.5" y="2514.0859"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="145" x="1644" y="2539.6504">FHIR-Directory</text><rect fill="#DCDCDC" height="2350.5234" style="stroke:#000000;stroke-width:1.0;" width="10" x="342.5" y="121.5625"/><rect fill="#DCDCDC" height="126.3672" style="stroke:#000000;stroke-width:1.0;" width="10" x="633.5" y="524.6875"/><rect fill="#DCDCDC" height="148.1563" style="stroke:#000000;stroke-width:1.0;" width="10" x="633.5" y="1132.3281"/><rect fill="#DCDCDC" height="58.7891" style="stroke:#000000;stroke-width:1.0;" width="10" x="857.5" y="558.4766"/><rect fill="#DCDCDC" height="80.5781" style="stroke:#000000;stroke-width:1.0;" width="10" x="857.5" y="1166.1172"/><rect fill="#DCDCDC" height="959.6563" style="stroke:#000000;stroke-width:1.0;" width="10" x="1110.5" y="1478.6406"/><rect fill="#DCDCDC" height="671.0078" style="stroke:#000000;stroke-width:1.0;" width="10" x="1378.5" y="709.8438"/><rect fill="#DCDCDC" height="33.7891" style="stroke:#000000;stroke-width:1.0;" width="10" x="1711.5" y="1800.3125"/><rect fill="#DCDCDC" height="120.1563" style="stroke:#000000;stroke-width:1.0;" width="10" x="1711.5" y="1977.6484"/><path d="M27,151.5625 L27,211.5625 L961,211.5625 L961,161.5625 L951,151.5625 L27,151.5625 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M951,151.5625 L951,161.5625 L961,161.5625 L951,151.5625 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="228.25" y="168.6294"> </text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="523" x="228.25" y="187.4751">Der Akteur ist erfolgreich beim Messenger-Service angemeldet</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="228.25" y="203.5513"> </text><polygon fill="#000000" points="330.5,302.9844,340.5,306.9844,330.5,310.9844,334.5,306.9844" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="126.5" x2="336.5" y1="306.9844" y2="306.9844"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="158" x="133.5" y="261.397">Suchparameter für</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="142" x="133.5" y="281.186">FHIR-Ressourcen</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="77" x="138.5" y="300.9751">eingeben</text><line style="stroke:#000000;stroke-width:1.0;" x1="352.5" x2="394.5" y1="380.3516" y2="380.3516"/><line style="stroke:#000000;stroke-width:1.0;" x1="394.5" x2="394.5" y1="380.3516" y2="393.3516"/><line style="stroke:#000000;stroke-width:1.0;" x1="353.5" x2="394.5" y1="393.3516" y2="393.3516"/><polygon fill="#000000" points="363.5,389.3516,353.5,393.3516,363.5,397.3516,359.5,393.3516" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="185" x="359.5" y="334.7642">prüfe ob noch gültiges</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="195" x="359.5" y="354.5532">tim-search-accesstoken</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="64" x="359.5" y="374.3423">vorliegt</text><path d="M10,433.3516 L74,433.3516 L74,440.4844 L64,450.4844 L10,450.4844 L10,433.3516 " fill="#D3D3D3" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="987.5" style="stroke:#000000;stroke-width:1.5;" width="1604.5" x="10" y="433.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="25" y="446.4185">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="5" x="89" y="451.3823">[</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="434" x="94" y="450.2031">kein gültiges tim-search-accesstoken vorhanden</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="5" x="528" y="451.3823">]</text><polygon fill="#000000" points="621.5,520.6875,631.5,524.6875,621.5,528.6875,625.5,524.6875" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="352.5" x2="627.5" y1="524.6875" y2="524.6875"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="210" x="359.5" y="498.8892">GET /_matrix/client/user/</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="262" x="359.5" y="518.6782">{userId}/openid/request_token</text><polygon fill="#000000" points="845.5,554.4766,855.5,558.4766,845.5,562.4766,849.5,558.4766" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="643.5" x2="851.5" y1="558.4766" y2="558.4766"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="117" x="650.5" y="552.4673">HTTP Forward</text><polygon fill="#000000" points="654.5,613.2656,644.5,617.2656,654.5,621.2656,650.5,617.2656" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="648.5" x2="861.5" y1="617.2656" y2="617.2656"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="180" x="675.5" y="611.2563">Matrix-OpenID-Token</text><polygon fill="#000000" points="363.5,647.0547,353.5,651.0547,363.5,655.0547,359.5,651.0547" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="357.5" x2="637.5" y1="651.0547" y2="651.0547"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="142" x="489.5" y="645.0454">HTTP(S) Forward</text><polygon fill="#000000" points="1366.5,705.8438,1376.5,709.8438,1366.5,713.8438,1370.5,709.8438" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="352.5" x2="1372.5" y1="709.8438" y2="709.8438"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="545" x="359.5" y="703.8345">GET /tim-authenticate... (Auth Header mit Matrix-OpenID-Token)</text><line style="stroke:#000000;stroke-width:1.0;" x1="1388.5" x2="1430.5" y1="803" y2="803"/><line style="stroke:#000000;stroke-width:1.0;" x1="1430.5" x2="1430.5" y1="803" y2="816"/><line style="stroke:#000000;stroke-width:1.0;" x1="1389.5" x2="1430.5" y1="816" y2="816"/><polygon fill="#000000" points="1399.5,812,1389.5,816,1399.5,820,1395.5,816" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="69" x="1395.5" y="737.6235">Prüfe ob</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="202" x="1395.5" y="757.4126">Matrix-Domain aus dem</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="201" x="1395.5" y="777.2017">Matrix-OpenID-Token in</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="202" x="1395.5" y="796.9907">Föderation enthalten ist</text><path d="M20,856 L84,856 L84,863.1328 L74,873.1328 L20,873.1328 L20,856 " fill="#D3D3D3" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="557.8516" style="stroke:#000000;stroke-width:1.5;" width="1582.5" x="20" y="856"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="35" y="869.0669">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="5" x="99" y="874.0308">[</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="427" x="104" y="872.8516">Matrix-Domain nicht in der Föderation enthalten</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="5" x="531" y="874.0308">]</text><polygon fill="#000000" points="363.5,943.3359,353.5,947.3359,363.5,951.3359,359.5,947.3359" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="357.5" x2="1377.5" y1="947.3359" y2="947.3359"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="81" x="1258.5" y="921.5376">HTTP 401</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="113" x="1258.5" y="941.3267">Unauthorized</text><line style="stroke:#000000;stroke-width:1.0;" x1="352.5" x2="394.5" y1="981.125" y2="981.125"/><line style="stroke:#000000;stroke-width:1.0;" x1="394.5" x2="394.5" y1="981.125" y2="994.125"/><line style="stroke:#000000;stroke-width:1.0;" x1="353.5" x2="394.5" y1="994.125" y2="994.125"/><polygon fill="#000000" points="363.5,990.125,353.5,994.125,363.5,998.125,359.5,994.125" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="140" x="359.5" y="975.1157">Session beenden</text><polygon fill="#000000" points="137.5,1023.9141,127.5,1027.9141,137.5,1031.9141,133.5,1027.9141" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="131.5" x2="341.5" y1="1027.9141" y2="1027.9141"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="192" x="143.5" y="1021.9048">Suche nicht erfolgreich</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="20" x2="1602.5" y1="1061.9141" y2="1061.9141"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="5" x="25" y="1077.9448">[</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="427" x="30" y="1076.7656">matrix_server_name in der Föderation enthalten</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="5" x="457" y="1077.9448">]</text><polygon fill="#000000" points="654.5,1128.3281,644.5,1132.3281,654.5,1136.3281,650.5,1132.3281" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="648.5" x2="1377.5" y1="1132.3281" y2="1132.3281"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="377" x="994.5" y="1126.3188">GET /openid/userinfo/?Matrix-OpenID-Token)</text><polygon fill="#000000" points="845.5,1162.1172,855.5,1166.1172,845.5,1170.1172,849.5,1166.1172" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="643.5" x2="851.5" y1="1166.1172" y2="1166.1172"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="142" x="650.5" y="1160.1079">HTTP(S) Forward</text><line style="stroke:#000000;stroke-width:1.0;" x1="867.5" x2="909.5" y1="1199.9063" y2="1199.9063"/><line style="stroke:#000000;stroke-width:1.0;" x1="909.5" x2="909.5" y1="1199.9063" y2="1212.9063"/><line style="stroke:#000000;stroke-width:1.0;" x1="868.5" x2="909.5" y1="1212.9063" y2="1212.9063"/><polygon fill="#000000" points="878.5,1208.9063,868.5,1212.9063,878.5,1216.9063,874.5,1212.9063" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="229" x="874.5" y="1193.897">prüfe Matrix-OpenID-Token</text><polygon fill="#000000" points="654.5,1242.6953,644.5,1246.6953,654.5,1250.6953,650.5,1246.6953" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="648.5" x2="861.5" y1="1246.6953" y2="1246.6953"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="149" x="706.5" y="1240.686">MXID des Nutzers</text><polygon fill="#000000" points="1366.5,1276.4844,1376.5,1280.4844,1366.5,1284.4844,1370.5,1280.4844" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="638.5" x2="1372.5" y1="1280.4844" y2="1280.4844"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="142" x="645.5" y="1274.4751">HTTP(S) Forward</text><line style="stroke:#000000;stroke-width:1.0;" x1="1388.5" x2="1430.5" y1="1334.0625" y2="1334.0625"/><line style="stroke:#000000;stroke-width:1.0;" x1="1430.5" x2="1430.5" y1="1334.0625" y2="1347.0625"/><line style="stroke:#000000;stroke-width:1.0;" x1="1389.5" x2="1430.5" y1="1347.0625" y2="1347.0625"/><polygon fill="#000000" points="1399.5,1343.0625,1389.5,1347.0625,1399.5,1351.0625,1395.5,1347.0625" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="66" x="1395.5" y="1308.2642">erzeuge</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="195" x="1395.5" y="1328.0532">tim-search-accesstoken</text><polygon fill="#000000" points="363.5,1376.8516,353.5,1380.8516,363.5,1384.8516,359.5,1380.8516" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="357.5" x2="1382.5" y1="1380.8516" y2="1380.8516"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="443" x="933.5" y="1374.8423">tim-search-accesstoken (inklusive MXID des Nutzers)</text><polygon fill="#000000" points="1098.5,1474.6406,1108.5,1478.6406,1098.5,1482.6406,1102.5,1478.6406" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="352.5" x2="1104.5" y1="1478.6406" y2="1478.6406"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="584" x="359.5" y="1472.6313">POST /search?... (Auth Header mit tim-search-accesstoken inkl. MXID)</text><line style="stroke:#000000;stroke-width:1.0;" x1="1120.5" x2="1162.5" y1="1537.4297" y2="1537.4297"/><line style="stroke:#000000;stroke-width:1.0;" x1="1162.5" x2="1162.5" y1="1537.4297" y2="1550.4297"/><line style="stroke:#000000;stroke-width:1.0;" x1="1121.5" x2="1162.5" y1="1550.4297" y2="1550.4297"/><polygon fill="#000000" points="1131.5,1546.4297,1121.5,1550.4297,1131.5,1554.4297,1127.5,1550.4297" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="244" x="1127.5" y="1531.4204">prüfe tim-search-accesstoken</text><path d="M230.5,1590.4297 L300.5,1590.4297 L300.5,1597.5625 L290.5,1607.5625 L230.5,1607.5625 L230.5,1590.4297 " fill="#D3D3D3" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="79.5469" style="stroke:#000000;stroke-width:1.5;" width="1002" x="230.5" y="1590.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="25" x="245.5" y="1603.4966">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="5" x="315.5" y="1608.4604">[</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="74" x="320.5" y="1607.2813">Abbruch</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="5" x="394.5" y="1608.4604">]</text><polygon fill="#000000" points="363.5,1632.9766,353.5,1636.9766,363.5,1640.9766,359.5,1636.9766" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="357.5" x2="1109.5" y1="1636.9766" y2="1636.9766"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="307" x="796.5" y="1630.9673">kein gültiges tim-search-accesstoken</text><path d="M998.5,1708.9766 L1062.5,1708.9766 L1062.5,1716.1094 L1052.5,1726.1094 L998.5,1726.1094 L998.5,1708.9766 " fill="#D3D3D3" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="158.125" style="stroke:#000000;stroke-width:1.5;" width="835" x="998.5" y="1708.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="1013.5" y="1722.0435">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="5" x="1077.5" y="1727.0073">[</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="391" x="1082.5" y="1725.8281">HealthcareService-Einträge werden gesucht</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="5" x="1473.5" y="1727.0073">]</text><polygon fill="#000000" points="1699.5,1796.3125,1709.5,1800.3125,1699.5,1804.3125,1703.5,1800.3125" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="1120.5" x2="1705.5" y1="1800.3125" y2="1800.3125"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="282" x="1127.5" y="1774.5142">POST /search/HealthcareService/?</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="272" x="1127.5" y="1794.3032">Finde Datensatz für TelematikID</text><polygon fill="#000000" points="1131.5,1830.1016,1121.5,1834.1016,1131.5,1838.1016,1127.5,1834.1016" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1125.5" x2="1715.5" y1="1834.1016" y2="1834.1016"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="139" x="1570.5" y="1828.0923">Result Body json</text><path d="M998.5,1906.1016 L1062.5,1906.1016 L1062.5,1913.2344 L1052.5,1923.2344 L998.5,1923.2344 L998.5,1906.1016 " fill="#D3D3D3" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="224.7031" style="stroke:#000000;stroke-width:1.5;" width="922" x="998.5" y="1906.1016"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="1013.5" y="1919.1685">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="5" x="1077.5" y="1924.1323">[</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="374" x="1082.5" y="1922.9531">PractitionerRole-Einträge werden gesucht</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="5" x="1456.5" y="1924.1323">]</text><polygon fill="#000000" points="1699.5,1973.6484,1709.5,1977.6484,1699.5,1981.6484,1703.5,1977.6484" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="1120.5" x2="1705.5" y1="1977.6484" y2="1977.6484"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="572" x="1127.5" y="1971.6392">POST /search/PractitionerRole/? ...&lt;MXID des anfragenden Nutzers&gt;</text><line style="stroke:#000000;stroke-width:1.0;" x1="1721.5" x2="1763.5" y1="2051.0156" y2="2051.0156"/><line style="stroke:#000000;stroke-width:1.0;" x1="1763.5" x2="1763.5" y1="2051.0156" y2="2064.0156"/><line style="stroke:#000000;stroke-width:1.0;" x1="1722.5" x2="1763.5" y1="2064.0156" y2="2064.0156"/><polygon fill="#000000" points="1732.5,2060.0156,1722.5,2064.0156,1732.5,2068.0156,1728.5,2064.0156" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="175" x="1728.5" y="2005.4282">Prüfung, ob MXID im</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="158" x="1728.5" y="2025.2173">TIEndpoint-Eintrag</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="115" x="1728.5" y="2045.0063">vorhanden ist</text><polygon fill="#000000" points="1131.5,2093.8047,1121.5,2097.8047,1131.5,2101.8047,1127.5,2097.8047" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1125.5" x2="1715.5" y1="2097.8047" y2="2097.8047"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="358" x="1351.5" y="2091.7954">Result Body json mit TIPractitioner-Eintrag</text><line style="stroke:#000000;stroke-width:1.0;" x1="1120.5" x2="1162.5" y1="2228.1719" y2="2228.1719"/><line style="stroke:#000000;stroke-width:1.0;" x1="1162.5" x2="1162.5" y1="2228.1719" y2="2241.1719"/><line style="stroke:#000000;stroke-width:1.0;" x1="1121.5" x2="1162.5" y1="2241.1719" y2="2241.1719"/><polygon fill="#000000" points="1131.5,2237.1719,1121.5,2241.1719,1131.5,2245.1719,1127.5,2241.1719" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="235" x="1127.5" y="2182.5845">Prüfung, ob MXID enthalten</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="32" x="1127.5" y="2202.3735">und</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="235" x="1127.5" y="2222.1626">TIEndpoint.status == active</text><path d="M230.5,2281.1719 L300.5,2281.1719 L300.5,2288.3047 L290.5,2298.3047 L230.5,2298.3047 L230.5,2281.1719 " fill="#D3D3D3" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="99.3359" style="stroke:#000000;stroke-width:1.5;" width="1002" x="230.5" y="2281.1719"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="25" x="245.5" y="2294.2388">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="5" x="315.5" y="2299.2026">[</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="74" x="320.5" y="2298.0234">Abbruch</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="5" x="394.5" y="2299.2026">]</text><polygon fill="#000000" points="363.5,2343.5078,353.5,2347.5078,363.5,2351.5078,359.5,2347.5078" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="357.5" x2="1109.5" y1="2347.5078" y2="2347.5078"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="275" x="823.5" y="2321.7095">kein passender Eintrag gefunden</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="266" x="823.5" y="2341.4985">oder TIEndpoint.status == false</text><polygon fill="#000000" points="363.5,2434.2969,353.5,2438.2969,363.5,2442.2969,359.5,2438.2969" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="357.5" x2="1114.5" y1="2438.2969" y2="2438.2969"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="240" x="868.5" y="2432.2876">MXID des gesuchten Akteurs</text><polygon fill="#000000" points="137.5,2468.0859,127.5,2472.0859,137.5,2476.0859,133.5,2472.0859" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="131.5" x2="346.5" y1="2472.0859" y2="2472.0859"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="51" x="289.5" y="2466.0767">status</text><!--MD5=[5b486bf2d9bd9ea387f9f6cb670f3bc1]
>>>>>>> master
@startuml
skinparam sequenceMessageAlign direction
skinparam minClassWidth 200
skinparam BoxPadding 1
skinparam sequenceReferenceHeaderBackgroundColor palegreen
scale max 2048 width

skinparam sequence {
ArrowColor black
ArrowFontSize 17
ActorBorderColor black
LifeLineBorderColor black
LifeLineBackgroundColor Gainsboro

ParticipantBorderColor Motivation
ParticipantBackgroundColor Motivation
ParticipantFontName Impact
ParticipantFontSize 20
ParticipantFontColor black
ParticipantBorderColor Black
ParticipantBackgroundColor MOTIVATION

ActorBackgroundColor Gainsboro
ActorFontColor black
ActorFontSize 20
ActorFontName Aapex
}
    actor U as "Akteur in der Rolle\nUser / User-HBA"
    participant cl as "TI-Messenger-Client"
    participant mp as "Messenger Proxy"
    participant hs as "Matrix-Homeserver"
    box <size:18>VZD-FHIR-Directory</size> #WhiteSmoke
      participant fp as "FHIR-Proxy"
<<<<<<< HEAD
      participant pp as "PASSporT-\nService"
=======
>>>>>>> master
      participant au as "Auth-Service"
      participant fd as "FHIR-Directory"
    end box

|||
<<<<<<< HEAD
note over U, hs: \n<size:17>Der Akteur ist erfolgreich beim Messenger Service angemeldet</size>\n
|||

      activate cl
    U->cl:gibt Suchparameter ein
=======
note over U, hs: \n<size:17>Der Akteur ist erfolgreich beim Messenger-Service angemeldet</size>\n
|||

      activate cl
    U->cl:Suchparameter für \nFHIR-Ressourcen \n eingeben
>>>>>>> master
    cl->cl: prüfe ob noch gültiges \ntim-search-accesstoken\nvorliegt

|||
alt#LightGrey #AliceBlue <size:16>kein gültiges tim-search-accesstoken vorhanden</size>
|||
      

<<<<<<< HEAD
    cl->mp: GET /_matrix/client/r0/user/\n{userId}/openid/request_token 
=======
    cl->mp: GET /_matrix/client/user/\n{userId}/openid/request_token 
>>>>>>> master
      activate mp
    mp->hs: HTTP Forward 

      activate hs
    |||
<<<<<<< HEAD
    hs- ->mp: HTTP 200 OK, Result body \n{"access_token": \n"Matrix-OpenID-Token", \n"matrix_server_name": \n"example.com",...}
      deactivate hs
    mp- ->cl: HTTP Forward
=======
    hs- ->mp: Matrix-OpenID-Token
      deactivate hs
    mp- ->cl: HTTP(S) Forward
>>>>>>> master
      deactivate mp
      
    |||
    cl->au: GET /tim-authenticate... (Auth Header mit Matrix-OpenID-Token)
      activate au
<<<<<<< HEAD
    au->au: Prüfe ob matrix_server_name\nin Föderationsliste enthalten ist

|||
alt#LightGrey #LightBlue <size:16>matrix_server_name nicht in der Föderationsliste enthalten</size>
=======
    au->au: Prüfe ob \nMatrix-Domain aus dem \nMatrix-OpenID-Token in \nFöderation enthalten ist

|||
alt#LightGrey #LightBlue <size:16>Matrix-Domain nicht in der Föderation enthalten</size>
>>>>>>> master
|||    

    au- ->cl: HTTP 401 \nUnauthorized
    cl->cl: Session beenden
    cl- ->U: Suche nicht erfolgreich
    
    |||
<<<<<<< HEAD
    else <size:16>matrix_server_name in der Föderationsliste enthalten</size>
    |||
        au->mp: GET /openid/userinfo/?\naccess_token=Matrix-OpenID-Token)
          activate mp
        mp->hs: HTTP Forward
          activate hs
        hs->hs: prüfe Matrix-OpenID-token
        hs- ->mp: HTTP 200 OK\n(Result Body \nMXID des Nutzers)
          deactivate hs
        mp- ->au: HTTP Forward
          deactivate mp
        au->au: erzeuge \ntim-search-accesstoken 
        au- ->cl: HTTP 200 OK, \ntim-search-accesstoken \n(inklusive MXID des Nutzers)
=======
    else <size:16>matrix_server_name in der Föderation enthalten</size>
    |||
        au->mp: GET /openid/userinfo/?Matrix-OpenID-Token)
          activate mp
        mp->hs: HTTP(S) Forward
          activate hs
        hs->hs: prüfe Matrix-OpenID-Token
        hs- ->mp: MXID des Nutzers
          deactivate hs
        mp- ->au: HTTP(S) Forward
          deactivate mp
        au->au: erzeuge \ntim-search-accesstoken 
        au- ->cl: tim-search-accesstoken (inklusive MXID des Nutzers)
>>>>>>> master
          deactivate au
          deactivate fp
    |||
    end
end

    |||
<<<<<<< HEAD
    cl->fp: GET /tim-search?... (Auth Header mit tim-search-accesstoken inkl. MXID)
=======
    cl->fp: POST /search?... (Auth Header mit tim-search-accesstoken inkl. MXID)
>>>>>>> master
    |||
      activate fp
    fp->fp: prüfe tim-search-accesstoken
    |||
    opt#LightGrey #MistyRose <size:16>Abbruch</size>
<<<<<<< HEAD
      fp- ->cl: kein tim-search-accesstoken vorhanden
    end
   
|||
alt#LightGrey #AliceBlue <size:16>TIHealthcareService-Einträge werden gesucht</size>
|||
    fp->fd: GET /?...
      activate fd
    fd- ->fp: HTTP 200 OK\n(Result Body json)
=======
      fp- ->cl: kein gültiges tim-search-accesstoken 
    |||
    end
   
|||
alt#LightGrey #AliceBlue <size:16>HealthcareService-Einträge werden gesucht</size>
|||
    fp->fd: POST /search/HealthcareService/? \nFinde Datensatz für TelematikID 
      activate fd
    fd- ->fp: Result Body json
>>>>>>> master
      deactivate fd
|||
end

|||
<<<<<<< HEAD
alt#LightGrey #AliceBlue <size:16>TIPractitionerRole-Einträge werden gesucht</size>
|||
    fp->fd: GET /?...<MXID des anfragenden Nutzers>
      activate fd
    fd->fd: Prüfung, ob MXID im \nTIEndpoint-Eintrag \nvorhanden ist
    fd- ->fp: HTTP 200 OK\n(Result Body json mit TIPractitioner-Eintrag)
=======
alt#LightGrey #AliceBlue <size:16>PractitionerRole-Einträge werden gesucht</size>
|||
    fp->fd: POST /search/PractitionerRole/? ...<MXID des anfragenden Nutzers> 
      activate fd
    fd->fd: Prüfung, ob MXID im \nTIEndpoint-Eintrag \nvorhanden ist
    fd- ->fp: Result Body json mit TIPractitioner-Eintrag
>>>>>>> master
      deactivate fd
|||
end
|||

<<<<<<< HEAD
  fp->fp: MXID enthalten und \nTIEndpoint.status == active
  |||
  opt#LightGrey #MistyRose <size:16>Abbruch</size>
    fp- ->cl: kein passender Eintrag gefunden \noder TIEndpoint.status == false
  end
  |||
  fp->pp: Request \nerzeuge PASSporT (MXIDs...)
    activate pp
  pp->pp: Erzeuge PASSporT \n(Attribut orig, dest)
  pp- ->fp: /?PASSporT=[PASSporT-String].
    deactivate pp
  fp- ->cl: HTTP 200 OK (MXID und PASSporT)
   |||
    deactivate fp
=======
  fp->fp: Prüfung, ob MXID enthalten \nund \nTIEndpoint.status == active
  |||
  opt#LightGrey #MistyRose <size:16>Abbruch</size>
    fp- ->cl: kein passender Eintrag gefunden \noder TIEndpoint.status == false
    |||
  end
  |||

  fp- ->cl: MXID des gesuchten Akteurs
  deactivate fp
  cl- ->U: status
   |||
    
>>>>>>> master
    deactivate cl

@enduml

PlantUML version 1.2022.5(Sat Apr 30 10:55:52 UTC 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>