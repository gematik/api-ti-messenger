<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1754px" preserveAspectRatio="none" style="width:1790px;height:1754px;background:#FFFFFF;" version="1.1" viewBox="0 0 1790 1754" width="1790px" zoomAndPan="magnify"><defs/><g><rect fill="#F5F5F5" height="1742.3438" style="stroke:#181818;stroke-width:0.5;" width="761" x="546" y="6"/><text fill="#000000" font-family="sans-serif" font-size="18" font-weight="bold" lengthAdjust="spacing" textLength="193" x="827.5" y="22.708">Messenger-Service</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="5" x="1020.5" y="23.8872"> </text><rect fill="#F0F8FF" height="1227.8281" style="stroke:#000000;stroke-width:1.0;" width="10" x="358" y="295.1641"/><rect fill="#DCDCDC" height="1227.8281" style="stroke:#000000;stroke-width:1.0;" width="10" x="652" y="328.9531"/><rect fill="#DCDCDC" height="33.7891" style="stroke:#000000;stroke-width:1.0;" width="10" x="921.5" y="409.5313"/><rect fill="#DCDCDC" height="585.8672" style="stroke:#000000;stroke-width:1.0;" width="10" x="921.5" y="903.3359"/><rect fill="#DCDCDC" height="67.5781" style="stroke:#000000;stroke-width:1.0;" width="10" x="1191" y="1010.3906"/><rect fill="#C9FFC9" height="330.1016" style="stroke:#000000;stroke-width:1.0;" width="10" x="1416" y="1226.6797"/><rect height="236.4922" style="stroke:#000000;stroke-width:1.5;fill:none;" width="1079" x="10" y="248.6172"/><rect fill="#FFE4E1" height="167.4922" style="stroke:#000000;stroke-width:1.5;" width="764" x="10" y="678.0547"/><rect height="678.4453" style="stroke:#000000;stroke-width:1.5;fill:none;" width="1548" x="236" y="943.3359"/><rect height="143.5" style="stroke:#000000;stroke-width:1.5;fill:none;" width="774" x="764" y="967.4688"/><rect height="439.8125" style="stroke:#000000;stroke-width:1.5;fill:none;" width="1528" x="246" y="1149.9688"/><line style="stroke:#000000;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="133" x2="133" y1="111.5625" y2="1638.7813"/><line style="stroke:#000000;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="363" x2="363" y1="111.5625" y2="1638.7813"/><line style="stroke:#000000;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="657" x2="657" y1="111.5625" y2="1638.7813"/><line style="stroke:#000000;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="926" x2="926" y1="111.5625" y2="1638.7813"/><line style="stroke:#000000;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="1196" x2="1196" y1="111.5625" y2="1638.7813"/><line style="stroke:#000000;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="1421" x2="1421" y1="111.5625" y2="1638.7813"/><line style="stroke:#000000;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="1651" x2="1651" y1="111.5625" y2="1638.7813"/><text fill="#000000" font-family="Aapex" font-size="20" lengthAdjust="spacing" textLength="220" x="20" y="83.5645">Akteur - A in der Rolle</text><text fill="#000000" font-family="Aapex" font-size="20" lengthAdjust="spacing" textLength="159" x="50.5" y="106.8457">User / User-HBA</text><ellipse cx="133" cy="13.5" fill="#DCDCDC" rx="8" ry="8" style="stroke:#000000;stroke-width:0.5;"/><path d="M133,21.5 L133,48.5 M120,29.5 L146,29.5 M133,48.5 L120,63.5 M133,48.5 L146,63.5 " fill="none" style="stroke:#000000;stroke-width:0.5;"/><text fill="#000000" font-family="Aapex" font-size="20" lengthAdjust="spacing" textLength="220" x="20" y="1656.3457">Akteur - A in der Rolle</text><text fill="#000000" font-family="Aapex" font-size="20" lengthAdjust="spacing" textLength="159" x="50.5" y="1679.627">User / User-HBA</text><ellipse cx="133" cy="1692.8438" fill="#DCDCDC" rx="8" ry="8" style="stroke:#000000;stroke-width:0.5;"/><path d="M133,1700.8438 L133,1727.8438 M120,1708.8438 L146,1708.8438 M133,1727.8438 L120,1742.8438 M133,1727.8438 L146,1742.8438 " fill="none" style="stroke:#000000;stroke-width:0.5;"/><rect fill="#F0F8FF" height="60.5625" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="214" x="256" y="50"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="139" x="293.5" y="75.5645">TI-Messenger-</text><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="79" x="323.5" y="98.8457">Client A</text><rect fill="#F0F8FF" height="60.5625" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="214" x="256" y="1637.7813"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="139" x="293.5" y="1663.3457">TI-Messenger-</text><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="79" x="323.5" y="1686.627">Client A</text><rect fill="#EFEFFF" height="60.5625" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="214" x="550" y="50"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="114" x="600" y="75.5645">Messenger-</text><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="54" x="630" y="98.8457">Proxy</text><rect fill="#EFEFFF" height="60.5625" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="214" x="550" y="1637.7813"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="114" x="600" y="1663.3457">Messenger-</text><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="54" x="630" y="1686.627">Proxy</text><rect fill="#EFEFFF" height="60.5625" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="305" x="774" y="50"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="189" x="829" y="75.5645">Matrix-Homeserver</text><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="291" x="781" y="98.8457">(inklusive Nutzerverzeichnis)</text><rect fill="#EFEFFF" height="60.5625" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="305" x="774" y="1637.7813"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="189" x="829" y="1663.3457">Matrix-Homeserver</text><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="291" x="781" y="1686.627">(inklusive Nutzerverzeichnis)</text><rect fill="#EFEFFF" height="37.2813" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="214" x="1089" y="73.2813"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="143" x="1124.5" y="98.8457">Push-Gateway</text><rect fill="#EFEFFF" height="37.2813" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="214" x="1089" y="1637.7813"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="143" x="1124.5" y="1663.3457">Push-Gateway</text><rect fill="#C9FFC9" height="60.5625" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="214" x="1314" y="50"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="139" x="1351.5" y="75.5645">TI-Messenger-</text><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="79" x="1381.5" y="98.8457">Client B</text><rect fill="#C9FFC9" height="60.5625" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="214" x="1314" y="1637.7813"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="139" x="1351.5" y="1663.3457">TI-Messenger-</text><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="79" x="1381.5" y="1686.627">Client B</text><text fill="#000000" font-family="Aapex" font-size="20" lengthAdjust="spacing" textLength="220" x="1538" y="83.5645">Akteur - B in der Rolle</text><text fill="#000000" font-family="Aapex" font-size="20" lengthAdjust="spacing" textLength="159" x="1568.5" y="106.8457">User / User-HBA</text><ellipse cx="1651" cy="13.5" fill="#DCDCDC" rx="8" ry="8" style="stroke:#000000;stroke-width:0.5;"/><path d="M1651,21.5 L1651,48.5 M1638,29.5 L1664,29.5 M1651,48.5 L1638,63.5 M1651,48.5 L1664,63.5 " fill="none" style="stroke:#000000;stroke-width:0.5;"/><text fill="#000000" font-family="Aapex" font-size="20" lengthAdjust="spacing" textLength="220" x="1538" y="1656.3457">Akteur - B in der Rolle</text><text fill="#000000" font-family="Aapex" font-size="20" lengthAdjust="spacing" textLength="159" x="1568.5" y="1679.627">User / User-HBA</text><ellipse cx="1651" cy="1692.8438" fill="#DCDCDC" rx="8" ry="8" style="stroke:#000000;stroke-width:0.5;"/><path d="M1651,1700.8438 L1651,1727.8438 M1638,1708.8438 L1664,1708.8438 M1651,1727.8438 L1638,1742.8438 M1651,1727.8438 L1664,1742.8438 " fill="none" style="stroke:#000000;stroke-width:0.5;"/><rect fill="#F0F8FF" height="1227.8281" style="stroke:#000000;stroke-width:1.0;" width="10" x="358" y="295.1641"/><rect fill="#DCDCDC" height="1227.8281" style="stroke:#000000;stroke-width:1.0;" width="10" x="652" y="328.9531"/><rect fill="#DCDCDC" height="33.7891" style="stroke:#000000;stroke-width:1.0;" width="10" x="921.5" y="409.5313"/><rect fill="#DCDCDC" height="585.8672" style="stroke:#000000;stroke-width:1.0;" width="10" x="921.5" y="903.3359"/><rect fill="#DCDCDC" height="67.5781" style="stroke:#000000;stroke-width:1.0;" width="10" x="1191" y="1010.3906"/><rect fill="#C9FFC9" height="330.1016" style="stroke:#000000;stroke-width:1.0;" width="10" x="1416" y="1226.6797"/><path d="M22,151.5625 L22,211.5625 L1761,211.5625 L1761,161.5625 L1751,151.5625 L22,151.5625 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1751,151.5625 L1751,161.5625 L1761,161.5625 L1751,151.5625 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="386" y="168.6294"> </text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="1002" x="386" y="187.4751">Die Akteure sind auf dem selben Messenger-Service angemeldet und im Besitz eines zugelassenen TI-Messenger-Clients</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="386" y="203.5513"> </text><path d="M10,248.6172 L80,248.6172 L80,255.75 L70,265.75 L10,265.75 L10,248.6172 " fill="#D3D3D3" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="236.4922" style="stroke:#000000;stroke-width:1.5;" width="1079" x="10" y="248.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="25" x="25" y="261.6841">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="5" x="95" y="266.6479">[</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="131" x="100" y="265.4688">Akteur suchen</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="5" x="231" y="266.6479">]</text><polygon fill="#000000" points="346,291.1641,356,295.1641,346,299.1641,350,295.1641" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="133" x2="352" y1="295.1641" y2="295.1641"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="129" x="140" y="289.1548">Suche Akteur B</text><polygon fill="#000000" points="640,324.9531,650,328.9531,640,332.9531,644,328.9531" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="368" x2="646" y1="328.9531" y2="328.9531"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="233" x="375" y="322.9438">GET /search (display_name)</text><line style="stroke:#000000;stroke-width:1.0;" x1="662" x2="704" y1="362.7422" y2="362.7422"/><line style="stroke:#000000;stroke-width:1.0;" x1="704" x2="704" y1="362.7422" y2="375.7422"/><line style="stroke:#000000;stroke-width:1.0;" x1="663" x2="704" y1="375.7422" y2="375.7422"/><polygon fill="#000000" points="673,371.7422,663,375.7422,673,379.7422,669,375.7422" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="150" x="669" y="356.7329">TLS-Terminierung</text><polygon fill="#000000" points="909.5,405.5313,919.5,409.5313,909.5,413.5313,913.5,409.5313" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="662" x2="915.5" y1="409.5313" y2="409.5313"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="117" x="669" y="403.522">HTTP Forward</text><polygon fill="#000000" points="673,439.3203,663,443.3203,673,447.3203,669,443.3203" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="667" x2="925.5" y1="443.3203" y2="443.3203"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="57" x="862.5" y="437.311">user-id</text><polygon fill="#000000" points="379,473.1094,369,477.1094,379,481.1094,375,477.1094" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="373" x2="651" y1="477.1094" y2="477.1094"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="117" x="528" y="471.1001">HTTP Forward</text><polygon fill="#000000" points="346,513.8984,356,517.8984,346,521.8984,350,517.8984" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="133" x2="352" y1="517.8984" y2="517.8984"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="150" x="140" y="511.8892">Akteur B einladen</text><polygon fill="#000000" points="640,567.4766,650,571.4766,640,575.4766,644,571.4766" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="368" x2="646" y1="571.4766" y2="571.4766"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="260" x="375" y="545.6782">POST /_matrix/client/r0/rooms/</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="136" x="375" y="565.4673">{roomId}/invite</text><line style="stroke:#000000;stroke-width:1.0;" x1="662" x2="704" y1="625.0547" y2="625.0547"/><line style="stroke:#000000;stroke-width:1.0;" x1="704" x2="704" y1="625.0547" y2="638.0547"/><line style="stroke:#000000;stroke-width:1.0;" x1="663" x2="704" y1="638.0547" y2="638.0547"/><polygon fill="#000000" points="673,634.0547,663,638.0547,673,642.0547,669,638.0547" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="180" x="669" y="599.2563">Domainzugehörigkeit</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="55" x="669" y="619.0454">prüfen</text><path d="M10,678.0547 L80,678.0547 L80,685.1875 L70,695.1875 L10,695.1875 L10,678.0547 " fill="#D3D3D3" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="167.4922" style="stroke:#000000;stroke-width:1.5;" width="764" x="10" y="678.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="25" x="25" y="691.1216">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="5" x="95" y="696.0854">[</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="74" x="100" y="694.9063">Abbruch</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="5" x="174" y="696.0854">]</text><polygon fill="#000000" points="379,760.1797,369,764.1797,379,768.1797,375,764.1797" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="373" x2="651" y1="764.1797" y2="764.1797"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="145" x="483" y="718.5923">Domain nicht auf</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="112" x="483" y="738.3813">dem gleichen</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="162" x="483" y="758.1704">Matrix-Homeserver</text><polygon fill="#000000" points="144,833.5469,134,837.5469,144,841.5469,140,837.5469" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="138" x2="357" y1="837.5469" y2="837.5469"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="120" x="207" y="791.9595">Akteur B kann</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="139" x="207" y="811.7485">nicht eingeladen</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="63" x="207" y="831.5376">werden</text><polygon fill="#000000" points="909.5,899.3359,919.5,903.3359,909.5,907.3359,913.5,903.3359" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="662" x2="915.5" y1="903.3359" y2="903.3359"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="110" x="669" y="897.3267">HTTP Foward</text><path d="M236,943.3359 L306,943.3359 L306,950.4688 L296,960.4688 L236,960.4688 L236,943.3359 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="678.4453" style="stroke:#000000;stroke-width:1.5;" width="1548" x="236" y="943.3359"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="25" x="251" y="956.4028">par</text><path d="M764,967.4688 L845,967.4688 L845,974.6016 L835,984.6016 L764,984.6016 L764,967.4688 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="143.5" style="stroke:#000000;stroke-width:1.5;" width="774" x="764" y="967.4688"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="36" x="779" y="980.5356">push</text><polygon fill="#000000" points="1179,1006.3906,1189,1010.3906,1179,1014.3906,1183,1010.3906" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="931.5" x2="1185" y1="1010.3906" y2="1010.3906"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="97" x="938.5" y="1004.3813">Notification</text><polygon fill="#000000" points="1409,1040.1797,1419,1044.1797,1409,1048.1797,1413,1044.1797" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="1201" x2="1415" y1="1044.1797" y2="1044.1797"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="97" x="1208" y="1038.1704">Notification</text><polygon fill="#000000" points="942.5,1073.9688,932.5,1077.9688,942.5,1081.9688,938.5,1077.9688" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="936.5" x2="1195" y1="1077.9688" y2="1077.9688"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="54" x="1135" y="1071.9595">Status</text><path d="M246,1149.9688 L329,1149.9688 L329,1157.1016 L319,1167.1016 L246,1167.1016 L246,1149.9688 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="439.8125" style="stroke:#000000;stroke-width:1.5;" width="1528" x="246" y="1149.9688"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="38" x="261" y="1163.0356">/sync</text><polygon fill="#000000" points="673,1188.8906,663,1192.8906,673,1196.8906,669,1192.8906" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="667" x2="920.5" y1="1192.8906" y2="1192.8906"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="122" x="792.5" y="1186.8813">Invite Request</text><polygon fill="#000000" points="1404,1222.6797,1414,1226.6797,1404,1230.6797,1408,1226.6797" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="662" x2="1410" y1="1226.6797" y2="1226.6797"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="117" x="669" y="1220.6704">HTTP Forward</text><polygon fill="#000000" points="1639,1256.4688,1649,1260.4688,1639,1264.4688,1643,1260.4688" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="1426" x2="1645" y1="1260.4688" y2="1260.4688"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="164" x="1433" y="1254.4595">Einladung anzeigen</text><polygon fill="#000000" points="1437,1290.2578,1427,1294.2578,1437,1298.2578,1433,1294.2578" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1431" x2="1650" y1="1294.2578" y2="1294.2578"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="177" x="1467" y="1288.2485">Einladung bestätigen</text><polygon fill="#000000" points="673,1324.0469,663,1328.0469,673,1332.0469,669,1328.0469" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="667" x2="1415" y1="1328.0469" y2="1328.0469"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="64" x="1345" y="1322.0376">commit</text><line style="stroke:#000000;stroke-width:1.0;" x1="662" x2="704" y1="1361.8359" y2="1361.8359"/><line style="stroke:#000000;stroke-width:1.0;" x1="704" x2="704" y1="1361.8359" y2="1374.8359"/><line style="stroke:#000000;stroke-width:1.0;" x1="663" x2="704" y1="1374.8359" y2="1374.8359"/><polygon fill="#000000" points="673,1370.8359,663,1374.8359,673,1378.8359,669,1374.8359" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="149" x="669" y="1355.8267">TLS Terminierung</text><polygon fill="#000000" points="909.5,1404.625,919.5,1408.625,909.5,1412.625,913.5,1408.625" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="662" x2="915.5" y1="1408.625" y2="1408.625"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="117" x="669" y="1402.6157">HTTP Forward</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="931.5" x2="973.5" y1="1442.4141" y2="1442.4141"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="973.5" x2="973.5" y1="1442.4141" y2="1455.4141"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="932.5" x2="973.5" y1="1455.4141" y2="1455.4141"/><polygon fill="#000000" points="942.5,1451.4141,932.5,1455.4141,942.5,1459.4141,938.5,1455.4141" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="127" x="938.5" y="1436.4048">Invite auslösen</text><polygon fill="#000000" points="673,1485.2031,663,1489.2031,673,1493.2031,669,1489.2031" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="667" x2="925.5" y1="1489.2031" y2="1489.2031"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="54" x="865.5" y="1483.1938">Status</text><polygon fill="#000000" points="374,1518.9922,364,1522.9922,374,1526.9922,370,1522.9922" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="368" x2="651" y1="1522.9922" y2="1522.9922"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="54" x="591" y="1516.9829">Status</text><polygon fill="#000000" points="1409,1552.7813,1419,1556.7813,1409,1560.7813,1413,1556.7813" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="657" x2="1415" y1="1556.7813" y2="1556.7813"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="54" x="664" y="1550.772">Status</text><!--MD5=[d0916a4cf093a28ae05b9206732def8b]
@startuml
skinparam sequenceMessageAlign direction
skinparam minClassWidth 200
skinparam BoxPadding 1
skinparam sequenceReferenceHeaderBackgroundColor palegreen
scale max 2048 width

skinparam sequence {
ArrowColor black
ArrowFontSize 17
ActorBorderColor black
LifeLineBorderColor black
LifeLineBackgroundColor Gainsboro

ParticipantBorderColor Motivation
ParticipantBackgroundColor Motivation
ParticipantFontName Impact
ParticipantFontSize 20
ParticipantFontColor black
ParticipantBorderColor Black
ParticipantBackgroundColor MOTIVATION

ActorBackgroundColor Gainsboro
ActorFontColor black
ActorFontSize 20
ActorFontName Aapex
}
    actor U1 as "Akteur - A in der Rolle\nUser / User-HBA"
    participant C1 as "TI-Messenger-\nClient A" #AliceBlue
    box <size:18>Messenger-Service</size> #WhiteSmoke
      participant MP as "Messenger-\nProxy"
      participant MH as "Matrix-Homeserver \n(inklusive Nutzerverzeichnis)"
      participant PG as "Push-Gateway"
    end box
    participant C2 as "TI-Messenger-\nClient B"#TECHNOLOGY
    actor U2 as "Akteur - B in der Rolle\nUser / User-HBA"
    
|||
note over U1, U2: \n<size:17>Die Akteure sind auf dem selben Messenger-Service angemeldet und im Besitz eines zugelassenen TI-Messenger-Clients</size>\n
|||

    opt#LightGrey <size:16>Akteur suchen</size>
    U1->C1: Suche Akteur B
      activate C1 #AliceBlue
    C1->MP: GET /search (display_name)
      activate MP
    MP->MP: TLS-Terminierung
    MP->MH: HTTP Forward
      activate MH
    MH- ->MP: user-id
      deactivate MH
    MP- ->C1: HTTP Forward
    end
    U1->C1: Akteur B einladen
    C1->MP: POST /_matrix/client/r0/rooms/\n{roomId}/invite
    MP->MP: Domainzugehörigkeit \nprüfen
    |||
    opt#LightGrey #MistyRose <size:16>Abbruch</size>
      MP- ->C1: Domain nicht auf \ndem gleichen \nMatrix-Homeserver
      C1- ->U1: Akteur B kann \nnicht eingeladen \nwerden
    end
    |||
    MP->MH: HTTP Foward
      activate MH
    |||
    group par 
      group push
        MH->PG: Notification
          activate PG
        PG->C2: Notification
        PG- ->MH: Status
          deactivate PG
      |||
      end
      |||
      group /sync
        MH->MP: Invite Request
        MP->C2: HTTP Forward
          activate C2 #TECHNOLOGY
        C2->U2: Einladung anzeigen
        U2- ->C2: Einladung bestätigen
        C2->MP: commit
        MP->MP: TLS Terminierung
        MP- ->MH: HTTP Forward
        MH- ->MH: Invite auslösen
        MH- ->MP: Status
          deactivate MH
        MP- ->C1: Status
          deactivate C1
        MP- ->C2: Status
          deactivate C2
          deactivate MP
          |||
      end
|||
    end
@enduml

PlantUML version 1.2022.5(Sat Apr 30 10:55:52 UTC 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>